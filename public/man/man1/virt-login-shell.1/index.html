<!DOCTYPE html>
<html
    lang="en-us"
    dir="ltr"
>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Manpages - virt-login-shell.1 | Technical Notes</title>

    <link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/css/syntax.css">
        
        
    </head>
    <body>
        <header class="container header">
            <span class="header__title">Technical Notes</span>
<button id="menuOpenBtn" class="header__menu-open-btn"><i data-lucide="menu"></i></button>

  <nav id="siteNav">
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/notes/">Notes</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/man/">Manpages</a>
    </li>
    <li>
      <a href="/search/">Search</a>
    </li>
    </ul>
    <button id="menuCloseBtn" class="header__menu-close-btn"><i data-lucide="x"></i></button>
  </nav>


        </header>
        <main class="container">
            
    <h1>Manpages - virt-login-shell.1</h1>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
NAME
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>virt-login-shell - tool to execute a shell within a container</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
SYNOPSIS
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p><strong>virt-login-shell</strong> [/OPTION/]</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
DESCRIPTION
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>The <strong>virt-login-shell</strong> program is a setuid shell that is used to join an
LXC container that matches the user&#39;s name. If the container is not
running, <strong>virt-login-shell</strong> will attempt to start the container.
<strong>virt-login-shell</strong> is not allowed to be run by root. Normal users will
get added to a container that matches their username, if it exists, and
they are configured in <strong>/etc/libvirt/virt-login-shell.conf</strong>.</p>
<p>
The basic structure of most <strong>virt-login-shell</strong> usage is:</p>
<blockquote>
<blockquote>
<pre class="example">
virt-login-shell
</pre>
</blockquote>
</blockquote>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
OPTIONS
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p><strong>-c CMD</strong></p>
<p>
Instruct the shell to run CMD instead of presenting an interactive shell
prompt.</p>
<p>
<strong>-h</strong>, <strong>–help</strong></p>
<p>
Display command line help usage then exit.</p>
<p>
<strong>-V</strong>, <strong>–version</strong></p>
<p>
Display version information then exit.</p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
CONFIG
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>By default, <strong>virt-login-shell</strong> will execute the <strong>/bin/sh</strong> program for
the user. You can modify this behaviour by defining the shell variable
in <strong>/etc/libvirt/virt-login-shell.conf</strong>. e.g.</p>
<blockquote>
<blockquote>
<pre class="example">
shell = [ &#34;/bin/bash&#34; ]
</pre>
</blockquote>
</blockquote>
<p>
If the <strong>auto_shell</strong> config option is set then it will attempt to
automatically detect the shell from <strong>/etc/password</strong> inside the
container. This should only be done if the container has a separate
<strong>/etc</strong> directory from the host, otherwise it will end up recursively
invoking <strong>virt-login-shell</strong>. e.g.</p>
<blockquote>
<blockquote>
<pre class="example">
auto_shell = 1
</pre>
</blockquote>
</blockquote>
<p>
By default no users are allowed to use virt-login-shell, if you want to
allow certain users to use virt-login-shell, you need to modify the
allowed_users variable in /etc/libvirt/virt-login-shell.conf. e.g.</p>
<blockquote>
<blockquote>
<pre class="example">
allowed_users = [ &#34;tom&#34;, &#34;dick&#34;, &#34;harry&#34; ]
</pre>
</blockquote>
</blockquote>
</div>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
EXIT STATUS
</h2>
<div id="outline-text-headline-6" class="outline-text-2">
<p><strong>virt-login-shell</strong> normally returns the exit status of the command it
executed. If the command was killed by a signal, but that signal is not
fatal to virt-login-shell, then it returns the signal number plus 128.</p>
<p>
Exit status generated by <strong>virt-login-shell</strong> itself:</p>
<blockquote>
<ul>
<li><strong>0</strong> An option was used to learn more about this binary.</li>
<li><strong>125</strong> Generic error before attempting execution of the configured
shell; for example, if libvirtd is not running.</li>
<li><strong>126</strong> The configured shell exists but could not be executed.</li>
<li><strong>127</strong> The configured shell could not be found.</li>
</ul>
</blockquote>
</div>
</div>
<div id="outline-container-headline-7" class="outline-2">
<h2 id="headline-7">
BUGS
</h2>
<div id="outline-text-headline-7" class="outline-text-2">
<p>Please report all bugs you discover. This should be done via either:</p>
<blockquote>
<ol>
<li>the mailing list</li>
</ol>
<p>&lt;https://libvirt.org/contact.html&gt;</p>
<ol>
<li value="2">the bug tracker</li>
</ol>
<p>&lt;https://libvirt.org/bugs.html&gt;</p>
</blockquote>
<p>
Alternatively, you may report bugs to your software distributor /
vendor.</p>
</div>
</div>
<div id="outline-container-headline-8" class="outline-2">
<h2 id="headline-8">
AUTHOR
</h2>
<div id="outline-text-headline-8" class="outline-text-2">
<p>Daniel Walsh</p>
</div>
</div>
<div id="outline-container-headline-9" class="outline-2">
<h2 id="headline-9">
COPYRIGHT
</h2>
<div id="outline-text-headline-9" class="outline-text-2">
<p>Copyright (C) 2013-2014 Red Hat, Inc., and the authors listed in the
libvirt AUTHORS file.</p>
</div>
</div>
<div id="outline-container-headline-10" class="outline-2">
<h2 id="headline-10">
LICENSE
</h2>
<div id="outline-text-headline-10" class="outline-text-2">
<p><strong>virt-login-shell</strong> is distributed under the terms of the GNU LGPL v2+.
This is free software; see the source for copying conditions. There is
NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE</p>
</div>
</div>
<div id="outline-container-headline-11" class="outline-2">
<h2 id="headline-11">
SEE ALSO
</h2>
<div id="outline-text-headline-11" class="outline-text-2">
<p>virsh(1), &lt;<a href="https://libvirt.org/">https://libvirt.org/</a>&gt;</p>
</div>
</div>


        </main>
        <footer class="container footer">
            <p>Copyright 2024. All rights reserved.</p>

        </footer>

        
        

        
            <script src="/js/main.js"></script>
    </body>
</html>
