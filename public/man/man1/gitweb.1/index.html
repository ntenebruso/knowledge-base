<!DOCTYPE html>
<html
    lang="en-us"
    dir="ltr"
>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Manpages - gitweb.1 | Technical Notes</title>

    <link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/css/syntax.css">
        
        
    </head>
    <body>
        <header class="container header">
            <span class="header__title">Technical Notes</span>
<button id="menuOpenBtn" class="header__menu-open-btn"><i data-lucide="menu"></i></button>

  <nav id="siteNav">
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/notes/">Notes</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/man/">Manpages</a>
    </li>
    <li>
      <a href="/search/">Search</a>
    </li>
    </ul>
    <button id="menuCloseBtn" class="header__menu-close-btn"><i data-lucide="x"></i></button>
  </nav>


        </header>
        <main class="container">
            
    <h1>Manpages - gitweb.1</h1>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
NAME
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>gitweb - Git web interface (web frontend to Git repositories)</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
SYNOPSIS
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>To get started with gitweb, run *git-instaweb*(1) from a Git repository.
This will configure and start your web server, and run a web browser
pointing to gitweb.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
DESCRIPTION
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>Gitweb provides a web interface to Git repositories. Its features
include:</p>
<blockquote>
<p>·</p>
<p>
Viewing multiple Git repositories with common root.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Browsing every revision of the repository.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Viewing the contents of files in the repository at any revision.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Viewing the revision log of branches, history of files and directories,
seeing what was changed, when, and by whom.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Viewing the blame/annotation details of any file (if enabled).</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Generating RSS and Atom feeds of commits, for any branch. The feeds are
auto-discoverable in modern web browsers.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Viewing everything that was changed in a revision, and stepping through
revisions one at a time, viewing the history of the repository.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Finding commits whose commit messages match a given search term.</p>
</blockquote>
<p>
See <strong><a href="https://repo.or.cz/w/git.git/tree/HEAD:/gitweb/">https://repo.or.cz/w/git.git/tree/HEAD:/gitweb/</a></strong> for gitweb source
code, browsed using gitweb itself.</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
CONFIGURATION
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>Various aspects of gitweb&#39;s behavior can be controlled through the
configuration file <strong>gitweb_config.perl</strong> or <strong>/etc/gitweb.conf</strong>. See the
*gitweb.conf*(5) for details.</p>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
Repositories
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>Gitweb can show information from one or more Git repositories. These
repositories have to be all on local filesystem, and have to share a
common repository root, i.e. be all under a single parent repository
(but see also the &#34;Advanced web server setup&#34; section, &#34;Webserver
configuration with multiple projects root&#34; subsection).</p>
<blockquote>
<pre class="example">
our $projectroot = /path/to/parent/directory;
</pre>
</blockquote>
<p>
The default value for <strong>$projectroot</strong> is <strong>/pub/git</strong>. You can change it
during building gitweb via the <strong>GITWEB_PROJECTROOT</strong> build configuration
variable.</p>
<p>
By default all Git repositories under <strong>$projectroot</strong> are visible and
available to gitweb. The list of projects is generated by default by
scanning the <strong>$projectroot</strong> directory for Git repositories (for object
databases to be more exact; gitweb is not interested in a working area,
and is best suited to showing &#34;bare&#34; repositories).</p>
<p>
The name of the repository in gitweb is the path to its <strong>$GIT_DIR</strong> (its
object database) relative to <strong>$projectroot</strong>. Therefore the repository
$repo can be found at &#34;$projectroot/$repo&#34;.</p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Projects list file format
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>Instead of having gitweb find repositories by scanning the filesystem
starting from $projectroot, you can provide a pre-generated list of
visible projects by setting *$projects_list* to point to a plain text
file with a list of projects (with some additional info).</p>
<p>
This file uses the following format:</p>
<blockquote>
<p>·</p>
<p>
One record (for project / repository) per line; does not support line
continuation (newline escaping).</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Leading and trailing whitespace are ignored.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Whitespace separated fields; any run of whitespace can be used as field
separator (rules for Perl&#39;s &#34;<strong>split(&#34; &#34;, $line)</strong>&#34;).</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Fields use modified URI encoding, defined in RFC 3986, section 2.1
(Percent-Encoding), or rather &#34;Query string encoding&#34; (see
<strong><a href="https://en.wikipedia.org/wiki/Query_string#URL_encoding">https://en.wikipedia.org/wiki/Query_string#URL_encoding</a></strong>), the
difference being that SP (&#34; &#34;) can be encoded as &#34;<del>&#34; (and therefore &#34;</del>&#34;
has to be also percent-encoded).</p>
<p>
Reserved characters are: &#34;%&#34; (used for encoding), &#34;+&#34; (can be used to
encode SPACE), all whitespace characters as defined in Perl, including
SP, TAB and LF, (used to separate fields in a record).</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Currently recognized fields are:</p>
<p>
&lt;repository path&gt;</p>
<blockquote>
<p>path to repository GIT_DIR, relative to <strong>$projectroot</strong></p>
</blockquote>
<p>
&lt;repository owner&gt;</p>
<blockquote>
<p>displayed as repository owner, preferably full name, or email, or both</p>
</blockquote>
</blockquote>
<p>
You can generate the projects list index file using the project_index
action (the <em>TXT</em> link on projects list page) directly from gitweb; see
also &#34;Generating projects list using gitweb&#34; section below.</p>
<p>
Example contents:</p>
<blockquote>
<pre class="example">
foo.git       Joe+R+Hacker+&lt;joe@example.com&gt;
foo/bar.git   O+W+Ner+&lt;owner@example.org&gt;
</pre>
</blockquote>
<p>
By default this file controls only which projects are <strong>visible</strong> on
projects list page (note that entries that do not point to correctly
recognized Git repositories won&#39;t be displayed by gitweb). Even if a
project is not visible on projects list page, you can view it
nevertheless by hand-crafting a gitweb URL. By setting <strong>$strict_export</strong>
configuration variable (see *gitweb.conf*(5)) to true value you can
allow viewing only of repositories also shown on the overview page (i.e.
only projects explicitly listed in projects list file will be
accessible).</p>
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
Generating projects list using gitweb
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<p>We assume that GITWEB_CONFIG has its default Makefile value, namely
<em>gitweb_config.perl</em>. Put the following in <em>gitweb_make_index.perl</em>
file:</p>
<blockquote>
<pre class="example">
read_config_file(&#34;gitweb_config.perl&#34;);
$projects_list = $projectroot;
</pre>
</blockquote>
<p>
Then create the following script to get list of project in the format
suitable for GITWEB_LIST build configuration variable (or
<strong>$projects_list</strong> variable in gitweb config):</p>
<blockquote>
<pre class="example">
#!/bin/sh

export GITWEB_CONFIG=&#34;gitweb_make_index.perl&#34;
export GATEWAY_INTERFACE=&#34;CGI/1.1&#34;
export HTTP_ACCEPT=&#34;*/*&#34;
export REQUEST_METHOD=&#34;GET&#34;
export QUERY_STRING=&#34;a=project_index&#34;

perl -- /var/www/cgi-bin/gitweb.cgi
</pre>
</blockquote>
<p>
Run this script and save its output to a file. This file could then be
used as projects list file, which means that you can set
<strong>$projects_list</strong> to its filename.</p>
</div>
</div>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
Controlling access to Git repositories
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p>By default all Git repositories under <strong>$projectroot</strong> are visible and
available to gitweb. You can however configure how gitweb controls
access to repositories.</p>
<blockquote>
<p>·</p>
<p>
As described in &#34;Projects list file format&#34; section, you can control
which projects are <strong>visible</strong> by selectively including repositories in
projects list file, and setting <strong>$projects_list</strong> gitweb configuration
variable to point to it. With <strong>$strict_export</strong> set, projects list file
can be used to control which repositories are <strong>available</strong> as well.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
You can configure gitweb to only list and allow viewing of the
explicitly exported repositories, via <strong>$export_ok</strong> variable in gitweb
config file; see <strong>gitweb.conf*(5) manpage. If it evaluates to true,
gitweb shows repositories only if this file named by *$export_ok</strong> exists
in its object database (if directory has the magic file named
<strong>$export_ok</strong>).</p>
<p>
For example <strong>git-daemon*(1) by default (unless *–export-all</strong> option is
used) allows pulling only for those repositories that have
<em>git-daemon-export-ok</em> file. Adding</p>
<blockquote>
<pre class="example">
our $export_ok = &#34;git-daemon-export-ok&#34;;
</pre>
</blockquote>
<p>
makes gitweb show and allow access only to those repositories that can
be fetched from via <strong>git://</strong> protocol.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>
Finally, it is possible to specify an arbitrary perl subroutine that
will be called for each repository to determine if it can be exported.
The subroutine receives an absolute path to the project (repository) as
its only parameter (i.e. &#34;$projectroot/$project&#34;).</p>
<p>
For example, if you use mod_perl to run the script, and have dumb HTTP
protocol authentication configured for your repositories, you can use
the following hook to allow access only if the user is authorized to
read the files:</p>
<blockquote>
<pre class="example">
$export_auth_hook = sub {
        use Apache2::SubRequest ();
        use Apache2::Const -compile =&gt; qw(HTTP_OK);
        my $path = &#34;$_[0]/HEAD&#34;;
        my $r    = Apache2::RequestUtil-&gt;request;
        my $sub  = $r-&gt;lookup_file($path);
        return $sub-&gt;filename eq $path
            &amp;&amp; $sub-&gt;status == Apache2::Const::HTTP_OK;
};
</pre>
</blockquote>
</blockquote>
</div>
</div>
<div id="outline-container-headline-9" class="outline-3">
<h3 id="headline-9">
Per-repository gitweb configuration
</h3>
<div id="outline-text-headline-9" class="outline-text-3">
<p>You can configure individual repositories shown in gitweb by creating
file in the <strong>GIT_DIR</strong> of Git repository, or by setting some repo
configuration variable (in <strong>GIT_DIR/config</strong>, see *git-config*(1)).</p>
<p>
You can use the following files in repository:</p>
<p>
README.html</p>
<blockquote>
<p>A html file (HTML fragment) which is included on the gitweb project
&#34;summary&#34; page inside <strong>&lt;div&gt;</strong> block element. You can use it for longer
description of a project, to provide links (for example to project&#39;s
homepage), etc. This is recognized only if XSS prevention is off
(<strong>$prevent_xss</strong> is false, see *gitweb.conf*(5)); a way to include a
README safely when XSS prevention is on may be worked out in the future.</p>
</blockquote>
<p>
description (or <strong>gitweb.description</strong>)</p>
<blockquote>
<p>Short (shortened to <strong>$projects_list_description_width</strong> in the projects
list page, which is 25 characters by default; see *gitweb.conf*(5))
single line description of a project (of a repository). Plain text file;
HTML will be escaped. By default set to</p>
<blockquote>
<pre class="example">
Unnamed repository; edit this file to name it for gitweb.
</pre>
</blockquote>
<p>
from the template during repository creation, usually installed in
<strong><em>usr/share/git-core/templates</em></strong>. You can use the <strong>gitweb.description</strong>
repo configuration variable, but the file takes precedence.</p>
</blockquote>
<p>
category (or <strong>gitweb.category</strong>)</p>
<blockquote>
<p>Singe line category of a project, used to group projects if
<strong>$projects_list_group_categories</strong> is enabled. By default (file and
configuration variable absent), uncategorized projects are put in the
<strong>$project_list_default_category</strong> category. You can use the
<strong>gitweb.category</strong> repo configuration variable, but the file takes
precedence.</p>
<p>
The configuration variables <strong>$projects_list_group_categories</strong> and
<strong>$project_list_default_category</strong> are described in *gitweb.conf*(5)</p>
</blockquote>
<p>
cloneurl (or multiple-valued <strong>gitweb.url</strong>)</p>
<blockquote>
<p>File with repository URL (used for clone and fetch), one per line.
Displayed in the project summary page. You can use multiple-valued
<strong>gitweb.url</strong> repository configuration variable for that, but the file
takes precedence.</p>
<p>
This is per-repository enhancement / version of global prefix-based
<strong>@git_base_url_list</strong> gitweb configuration variable (see
*gitweb.conf*(5)).</p>
</blockquote>
<p>
gitweb.owner</p>
<blockquote>
<p>You can use the <strong>gitweb.owner</strong> repository configuration variable to set
repository&#39;s owner. It is displayed in the project list and summary
page.</p>
<p>
If it&#39;s not set, filesystem directory&#39;s owner is used (via GECOS field,
i.e. real name field from <strong>getpwuid*(3)) if *$projects_list</strong> is unset
(gitweb scans <strong>$projectroot</strong> for repositories); if <strong>$projects_list</strong>
points to file with list of repositories, then project owner defaults to
value from this file for given repository.</p>
</blockquote>
<p>
various <strong>gitweb.*</strong> config variables (in config)</p>
<blockquote>
<p>Read description of <strong>%feature</strong> hash for detailed list, and descriptions.
See also &#34;Configuring gitweb features&#34; section in *gitweb.conf*(5)</p>
</blockquote>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-10" class="outline-2">
<h2 id="headline-10">
ACTIONS, AND URLS
</h2>
<div id="outline-text-headline-10" class="outline-text-2">
<p>Gitweb can use path_info (component) based URLs, or it can pass all
necessary information via query parameters. The typical gitweb URLs are
broken down in to five components:</p>
<blockquote>
<pre class="example">
.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision&gt;:/&lt;path&gt;?&lt;arguments&gt;
</pre>
</blockquote>
<p>
repo</p>
<blockquote>
<p>The repository the action will be performed on.</p>
<p>
All actions except for those that list all available projects, in
whatever form, require this parameter.</p>
</blockquote>
<p>
action</p>
<blockquote>
<p>The action that will be run. Defaults to <em>projects_list</em> if repo is not
set, and to <em>summary</em> otherwise.</p>
</blockquote>
<p>
revision</p>
<blockquote>
<p>Revision shown. Defaults to HEAD.</p>
</blockquote>
<p>
path</p>
<blockquote>
<p>The path within the &lt;repository&gt; that the action is performed on, for
those actions that require it.</p>
</blockquote>
<p>
arguments</p>
<blockquote>
<p>Any arguments that control the behaviour of the action.</p>
</blockquote>
<p>
Some actions require or allow to specify two revisions, and sometimes
even two pathnames. In most general form such path_info (component)
based gitweb URL looks like this:</p>
<blockquote>
<pre class="example">
.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision-from&gt;:/&lt;path-from&gt;..&lt;revision-to&gt;:/&lt;path-to&gt;?&lt;arguments&gt;
</pre>
</blockquote>
<p>
Each action is implemented as a subroutine, and must be present in
%actions hash. Some actions are disabled by default, and must be turned
on via feature mechanism. For example to enable <em>blame</em> view add the
following to gitweb configuration file:</p>
<blockquote>
<pre class="example">
$feature{blame}{default} = [1];
</pre>
</blockquote>
<div id="outline-container-headline-11" class="outline-3">
<h3 id="headline-11">
Actions:
</h3>
<div id="outline-text-headline-11" class="outline-text-3">
<p>The standard actions are:</p>
<p>
project_list</p>
<blockquote>
<p>Lists the available Git repositories. This is the default command if no
repository is specified in the URL.</p>
</blockquote>
<p>
summary</p>
<blockquote>
<p>Displays summary about given repository. This is the default command if
no action is specified in URL, and only repository is specified.</p>
</blockquote>
<p>
heads, remotes</p>
<blockquote>
<p>Lists all local or all remote-tracking branches in given repository.</p>
<p>
The latter is not available by default, unless configured.</p>
</blockquote>
<p>
tags</p>
<blockquote>
<p>List all tags (lightweight and annotated) in given repository.</p>
</blockquote>
<p>
blob, tree</p>
<blockquote>
<p>Shows the files and directories in a given repository path, at given
revision. This is default command if no action is specified in the URL,
and path is given.</p>
</blockquote>
<p>
blob_plain</p>
<blockquote>
<p>Returns the raw data for the file in given repository, at given path and
revision. Links to this action are marked <em>raw</em>.</p>
</blockquote>
<p>
blobdiff</p>
<blockquote>
<p>Shows the difference between two revisions of the same file.</p>
</blockquote>
<p>
blame, blame_incremental</p>
<blockquote>
<p>Shows the blame (also called annotation) information for a file. On a
per line basis it shows the revision in which that line was last changed
and the user that committed the change. The incremental version (which
if configured is used automatically when JavaScript is enabled) uses
Ajax to incrementally add blame info to the contents of given file.</p>
<p>
This action is disabled by default for performance reasons.</p>
</blockquote>
<p>
commit, commitdiff</p>
<blockquote>
<p>Shows information about a specific commit in a repository. The <em>commit</em>
view shows information about commit in more detail, the <em>commitdiff</em>
action shows changeset for given commit.</p>
</blockquote>
<p>
patch</p>
<blockquote>
<p>Returns the commit in plain text mail format, suitable for applying with
*git-am*(1).</p>
</blockquote>
<p>
tag</p>
<blockquote>
<p>Display specific annotated tag (tag object).</p>
</blockquote>
<p>
log, shortlog</p>
<blockquote>
<p>Shows log information (commit message or just commit subject) for a
given branch (starting from given revision).</p>
<p>
The <em>shortlog</em> view is more compact; it shows one commit per line.</p>
</blockquote>
<p>
history</p>
<blockquote>
<p>Shows history of the file or directory in a given repository path,
starting from given revision (defaults to HEAD, i.e. default branch).</p>
<p>
This view is similar to <em>shortlog</em> view.</p>
</blockquote>
<p>
rss, atom</p>
<blockquote>
<p>Generates an RSS (or Atom) feed of changes to repository.</p>
</blockquote>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-12" class="outline-2">
<h2 id="headline-12">
WEBSERVER CONFIGURATION
</h2>
<div id="outline-text-headline-12" class="outline-text-2">
<p>This section explains how to configure some common webservers to run
gitweb. In all cases, <strong>/path/to/gitweb</strong> in the examples is the directory
you ran installed gitweb in, and contains <strong>gitweb_config.perl</strong>.</p>
<p>
If you&#39;ve configured a web server that isn&#39;t listed here for gitweb,
please send in the instructions so they can be included in a future
release.</p>
<div id="outline-container-headline-13" class="outline-3">
<h3 id="headline-13">
Apache as CGI
</h3>
<div id="outline-text-headline-13" class="outline-text-3">
<p>Apache must be configured to support CGI scripts in the directory in
which gitweb is installed. Let&#39;s assume that it is <strong>/var/www/cgi-bin</strong>
directory.</p>
<blockquote>
<pre class="example">
ScriptAlias /cgi-bin/ &#34;/var/www/cgi-bin/&#34;

&lt;Directory &#34;/var/www/cgi-bin&#34;&gt;
    Options Indexes FollowSymlinks ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
</pre>
</blockquote>
<p>
With that configuration the full path to browse repositories would be:</p>
<blockquote>
<pre class="example">
http://server/cgi-bin/gitweb.cgi
</pre>
</blockquote>
</div>
</div>
<div id="outline-container-headline-14" class="outline-3">
<h3 id="headline-14">
Apache with mod_perl, via ModPerl::Registry
</h3>
<div id="outline-text-headline-14" class="outline-text-3">
<p>You can use mod_perl with gitweb. You must install Apache::Registry (for
mod_perl 1.x) or ModPerl::Registry (for mod_perl 2.x) to enable this
support.</p>
<p>
Assuming that gitweb is installed to <strong>/var/www/perl</strong>, the following
Apache configuration (for mod_perl 2.x) is suitable.</p>
<blockquote>
<pre class="example">
Alias /perl &#34;/var/www/perl&#34;

&lt;Directory &#34;/var/www/perl&#34;&gt;
    SetHandler perl-script
    PerlResponseHandler ModPerl::Registry
    PerlOptions +ParseHeaders
    Options Indexes FollowSymlinks +ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
</pre>
</blockquote>
<p>
With that configuration the full path to browse repositories would be:</p>
<blockquote>
<pre class="example">
http://server/perl/gitweb.cgi
</pre>
</blockquote>
</div>
</div>
<div id="outline-container-headline-15" class="outline-3">
<h3 id="headline-15">
Apache with FastCGI
</h3>
<div id="outline-text-headline-15" class="outline-text-3">
<p>Gitweb works with Apache and FastCGI. First you need to rename, copy or
symlink gitweb.cgi to gitweb.fcgi. Let&#39;s assume that gitweb is installed
in <strong>/usr/share/gitweb</strong> directory. The following Apache configuration is
suitable (UNTESTED!)</p>
<blockquote>
<pre class="example">
FastCgiServer /usr/share/gitweb/gitweb.cgi
ScriptAlias /gitweb /usr/share/gitweb/gitweb.cgi

Alias /gitweb/static /usr/share/gitweb/static
&lt;Directory /usr/share/gitweb/static&gt;
    SetHandler default-handler
&lt;/Directory&gt;
</pre>
</blockquote>
<p>
With that configuration the full path to browse repositories would be:</p>
<blockquote>
<pre class="example">
http://server/gitweb
</pre>
</blockquote>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-16" class="outline-2">
<h2 id="headline-16">
ADVANCED WEB SERVER SETUP
</h2>
<div id="outline-text-headline-16" class="outline-text-2">
<p>All of those examples use request rewriting, and need <strong>mod_rewrite</strong> (or
equivalent; examples below are written for Apache).</p>
<div id="outline-container-headline-17" class="outline-3">
<h3 id="headline-17">
Single URL for gitweb and for fetching
</h3>
<div id="outline-text-headline-17" class="outline-text-3">
<p>If you want to have one URL for both gitweb and your <strong>http://</strong>
repositories, you can configure Apache like this:</p>
<blockquote>
<pre class="example">
&lt;VirtualHost *:80&gt;
    ServerName    git.example.org
    DocumentRoot  /pub/git
    SetEnv        GITWEB_CONFIG   /etc/gitweb.conf

    # turning on mod rewrite
    RewriteEngine on

    # make the front page an internal rewrite to the gitweb script
    RewriteRule ^/$  /cgi-bin/gitweb.cgi

    # make access for &#34;dumb clients&#34; work
    RewriteRule ^/(.*\.git/(?!/?(HEAD|info|objects|refs)).*)?$ \
                /cgi-bin/gitweb.cgi%{REQUEST_URI}  [L,PT]
&lt;/VirtualHost&gt;
</pre>
</blockquote>
<p>
The above configuration expects your public repositories to live under
<strong>/pub/git</strong> and will serve them as
<strong><a href="http://git.domain.org/dir-under-pub-git">http://git.domain.org/dir-under-pub-git</a></strong>, both as clonable Git URL and
as browsable gitweb interface. If you then start your <strong>git-daemon*(1)
with *–base-path=/pub/git –export-all</strong> then you can even use the
<strong>git://</strong> URL with exactly the same path.</p>
<p>
Setting the environment variable <strong>GITWEB_CONFIG</strong> will tell gitweb to use
the named file (i.e. in this example <strong>/etc/gitweb.conf</strong>) as a
configuration for gitweb. You don&#39;t really need it in above example; it
is required only if your configuration file is in different place than
built-in (during compiling gitweb) <em>gitweb_config.perl</em> or
<strong>/etc/gitweb.conf</strong>. See *gitweb.conf*(5) for details, especially
information about precedence rules.</p>
<p>
If you use the rewrite rules from the example you <strong>might</strong> also need
something like the following in your gitweb configuration file
(<strong>/etc/gitweb.conf</strong> following example):</p>
<blockquote>
<pre class="example">
@stylesheets = (&#34;/some/absolute/path/gitweb.css&#34;);
$my_uri    = &#34;/&#34;;
$home_link = &#34;/&#34;;
$per_request_config = 1;
</pre>
</blockquote>
<p>
Nowadays though gitweb should create HTML base tag when needed (to set
base URI for relative links), so it should work automatically.</p>
</div>
</div>
<div id="outline-container-headline-18" class="outline-3">
<h3 id="headline-18">
Webserver configuration with multiple projects root
</h3>
<div id="outline-text-headline-18" class="outline-text-3">
<p>If you want to use gitweb with several project roots you can edit your
Apache virtual host and gitweb configuration files in the following way.</p>
<p>
The virtual host configuration (in Apache configuration file) should
look like this:</p>
<blockquote>
<pre class="example">
&lt;VirtualHost *:80&gt;
    ServerName    git.example.org
    DocumentRoot  /pub/git
    SetEnv        GITWEB_CONFIG  /etc/gitweb.conf

    # turning on mod rewrite
    RewriteEngine on

    # make the front page an internal rewrite to the gitweb script
    RewriteRule ^/$  /cgi-bin/gitweb.cgi  [QSA,L,PT]

    # look for a public_git directory in unix users home
    # http://git.example.org/~&lt;user&gt;/
    RewriteRule ^/\~([^\/]+)(/|/gitweb.cgi)?$   /cgi-bin/gitweb.cgi \
                [QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]

    # http://git.example.org/+&lt;user&gt;/
    #RewriteRule ^/\+([^\/]+)(/|/gitweb.cgi)?$  /cgi-bin/gitweb.cgi \
                 [QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]

    # http://git.example.org/user/&lt;user&gt;/
    #RewriteRule ^/user/([^\/]+)/(gitweb.cgi)?$ /cgi-bin/gitweb.cgi \
                 [QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]

    # defined list of project roots
    RewriteRule ^/scm(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi \
                [QSA,E=GITWEB_PROJECTROOT:/pub/scm/,L,PT]
    RewriteRule ^/var(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi \
                [QSA,E=GITWEB_PROJECTROOT:/var/git/,L,PT]

    # make access for &#34;dumb clients&#34; work
    RewriteRule ^/(.*\.git/(?!/?(HEAD|info|objects|refs)).*)?$ \
                /cgi-bin/gitweb.cgi%{REQUEST_URI}  [L,PT]
&lt;/VirtualHost&gt;
</pre>
</blockquote>
<p>
Here actual project root is passed to gitweb via <strong>GITWEB_PROJECT_ROOT</strong>
environment variable from a web server, so you need to put the following
line in gitweb configuration file (<strong>/etc/gitweb.conf</strong> in above example):</p>
<blockquote>
<pre class="example">
$projectroot = $ENV{GITWEB_PROJECTROOT} || &#34;/pub/git&#34;;
</pre>
</blockquote>
<p>
<strong>Note</strong> that this requires to be set for each request, so either
<strong>$per_request_config</strong> must be false, or the above must be put in code
referenced by <strong>$per_request_config</strong>;</p>
<p>
These configurations enable two things. First, each unix user (<strong>&lt;user&gt;</strong>)
of the server will be able to browse through gitweb Git repositories
found in <strong>~/public_git/</strong> with the following url:</p>
<blockquote>
<pre class="example">
http://git.example.org/~&lt;user&gt;/
</pre>
</blockquote>
<p>
If you do not want this feature on your server just remove the second
rewrite rule.</p>
<p>
If you already use ‘mod_userdir` in your virtual host or you don&#39;t want
to use the ~&#39; as first character, just comment or remove the second
rewrite rule, and uncomment one of the following according to what you
want.</p>
<p>
Second, repositories found in <strong><em>pub/scm</em></strong> and <strong><em>var/git</em></strong> will be
accessible through <strong><a href="http://git.example.org/scm/">http://git.example.org/scm/</a></strong> and
<strong><a href="http://git.example.org/var/">http://git.example.org/var/</a></strong>. You can add as many project roots as you
want by adding rewrite rules like the third and the fourth.</p>
</div>
</div>
<div id="outline-container-headline-19" class="outline-3">
<h3 id="headline-19">
PATH_INFO usage
</h3>
<div id="outline-text-headline-19" class="outline-text-3">
<p>If you enable PATH_INFO usage in gitweb by putting</p>
<blockquote>
<pre class="example">
$feature{pathinfo}{default} = [1];
</pre>
</blockquote>
<p>
in your gitweb configuration file, it is possible to set up your server
so that it consumes and produces URLs in the form</p>
<blockquote>
<pre class="example">
http://git.example.com/project.git/shortlog/sometag
</pre>
</blockquote>
<p>
i.e. without <em>gitweb.cgi</em> part, by using a configuration such as the
following. This configuration assumes that <strong>/var/www/gitweb</strong> is the
DocumentRoot of your webserver, contains the gitweb.cgi script and
complementary static files (stylesheet, favicon, JavaScript):</p>
<blockquote>
<pre class="example">
&lt;VirtualHost *:80&gt;
        ServerAlias git.example.com

        DocumentRoot /var/www/gitweb

        &lt;Directory /var/www/gitweb&gt;
                Options ExecCGI
                AddHandler cgi-script cgi

                DirectoryIndex gitweb.cgi

                RewriteEngine On
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteRule ^.* /gitweb.cgi/$0 [L,PT]
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</pre>
</blockquote>
<p>
The rewrite rule guarantees that existing static files will be properly
served, whereas any other URL will be passed to gitweb as PATH_INFO
parameter.</p>
<p>
<strong>Notice</strong> that in this case you don&#39;t need special settings for
<strong>@stylesheets</strong>, <strong>$my_uri</strong> and <strong>$home_link</strong>, but you lose &#34;dumb client&#34;
access to your project .git dirs (described in &#34;Single URL for gitweb
and for fetching&#34; section). A possible workaround for the latter is the
following: in your project root dir (e.g. <strong>/pub/git</strong>) have the projects
named <strong>without</strong> a .git extension (e.g. <strong>/pub/git/project</strong> instead of
<strong>/pub/git/project.git</strong>) and configure Apache as follows:</p>
<blockquote>
<pre class="example">
&lt;VirtualHost *:80&gt;
        ServerAlias git.example.com

        DocumentRoot /var/www/gitweb

        AliasMatch ^(/.*?)(\.git)(/.*)?$ /pub/git$1$3
        &lt;Directory /var/www/gitweb&gt;
                Options ExecCGI
                AddHandler cgi-script cgi

                DirectoryIndex gitweb.cgi

                RewriteEngine On
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteRule ^.* /gitweb.cgi/$0 [L,PT]
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</pre>
</blockquote>
<p>
The additional AliasMatch makes it so that</p>
<blockquote>
<pre class="example">
http://git.example.com/project.git
</pre>
</blockquote>
<p>
will give raw access to the project&#39;s Git dir (so that the project can
be cloned), while</p>
<blockquote>
<pre class="example">
http://git.example.com/project
</pre>
</blockquote>
<p>
will provide human-friendly gitweb access.</p>
<p>
This solution is not 100% bulletproof, in the sense that if some project
has a named ref (branch, tag) starting with <strong>git/</strong>, then paths such as</p>
<blockquote>
<pre class="example">
http://git.example.com/project/command/abranch..git/abranch
</pre>
</blockquote>
<p>
will fail with a 404 error.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-20" class="outline-2">
<h2 id="headline-20">
BUGS
</h2>
<div id="outline-text-headline-20" class="outline-text-2">
<p>Please report any bugs or feature requests to <strong>git@vger.kernel.org</strong>[1],
putting &#34;gitweb&#34; in the subject of email.</p>
</div>
</div>
<div id="outline-container-headline-21" class="outline-2">
<h2 id="headline-21">
SEE ALSO
</h2>
<div id="outline-text-headline-21" class="outline-text-2">
<p>*gitweb.conf*(5), *git-instaweb*(1)</p>
<p>
<strong>gitweb/README</strong>, <strong>gitweb/INSTALL</strong></p>
</div>
</div>
<div id="outline-container-headline-22" class="outline-2">
<h2 id="headline-22">
GIT
</h2>
<div id="outline-text-headline-22" class="outline-text-2">
<p>Part of the *git*(1) suite</p>
</div>
</div>
<div id="outline-container-headline-23" class="outline-2">
<h2 id="headline-23">
NOTES
</h2>
<div id="outline-text-headline-23" class="outline-text-2">
<dl>
<dt>
1.
</dt>
<dd>git@vger.kernel.org

mailto:git@vger.kernel.org</dd>
</dl>
</div>
</div>


        </main>
        <footer class="container footer">
            <p>Copyright 2024. All rights reserved.</p>

        </footer>

        
        

        
            <script src="/js/main.js"></script>
    </body>
</html>
