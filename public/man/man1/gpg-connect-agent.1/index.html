<!DOCTYPE html>
<html
    lang="en-us"
    dir="ltr"
>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Manpages - gpg-connect-agent.1 | Technical Notes</title>

    <link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/css/syntax.css">
        
        
    </head>
    <body>
        <header class="container header">
            <span class="header__title">Technical Notes</span>
<button id="menuOpenBtn" class="header__menu-open-btn"><i data-lucide="menu"></i></button>

  <nav id="siteNav">
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/notes/">Notes</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/man/">Manpages</a>
    </li>
    <li>
      <a href="/search/">Search</a>
    </li>
    </ul>
    <button id="menuCloseBtn" class="header__menu-close-btn"><i data-lucide="x"></i></button>
  </nav>


        </header>
        <main class="container">
            
    <h1>Manpages - gpg-connect-agent.1</h1>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
NAME
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p><strong>gpg-connect-agent</strong> - Communicate with a running agent</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
SYNOPSIS
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p><strong>gpg-connect-agent</strong> [/options/]/[commands]/</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
DESCRIPTION
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>The <strong>gpg-connect-agent</strong> is a utility to communicate with a running
<strong>gpg-agent</strong>. It is useful to check out the commands <strong>gpg-agent</strong> provides
using the Assuan interface. It might also be useful for scripting simple
applications. Input is expected at stdin and output gets printed to
stdout.</p>
<p>
It is very similar to running <strong>gpg-agent</strong> in server mode; but here we
connect to a running instance.</p>
<p>
The following options may be used:</p>
<dl>
<dt>
<strong>–dirmngr</strong>
</dt>
<dd>Connect to a running directory manager (keyserver
client) instead of to the gpg-agent. If a dirmngr is not running,
start it.</dd>
<dt>
<strong>–keyboxd</strong>
</dt>
<dd>Connect to a running keybox daemon instead of to the
gpg-agent. If a keyboxd is not running, start it.</dd>
<dt>
?
</dt>
<dd><strong>-S</strong><br>
<strong>–raw-socket <em>name</em></strong> :: Connect to socket <em>name</em> assuming this is an
Assuan style server. Do not run any special initializations or
environment checks. This may be used to directly connect to any Assuan
style socket server.</dd>
<dt>
?
</dt>
<dd>
<p><strong>-E</strong><br>
<strong>–exec</strong> :: Take the rest of the command line as a program and it&#39;s
arguments and execute it as an Assuan server. Here is how you would
run <strong>gpgsm</strong>:</p>
<pre class="example">
 gpg-connect-agent --exec gpgsm --server
</pre>
</dd>
</dl>
<p>Note that you may not use options on the command line in this case.</p>
<ul>
<li><strong>-v</strong><br>
<strong>–verbose</strong> :: Output additional information while running.</li>
<li><strong>-q</strong> :: - <strong>–quiet</strong> :: Try to be as quiet as possible.</li>
<li><strong>–homedir <em>dir</em></strong> :: Set the name of the home directory to <em>dir</em>. If
this option is not used, the home directory defaults to ‘/~/.gnupg/&#39;.
It is only recognized when given on the command line. It also
overrides any home directory stated through the environment variable
‘/GNUPGHOME/&#39; or (on Windows systems) by means of the Registry entry
<em>HKCU§oftware\GNU\GnuPG:HomeDir</em>.

On Windows systems it is possible to install GnuPG as a portable
application. In this case only this command line option is considered,
all other ways to set a home directory are ignored.</li>
<li><strong>–chuid <em>uid</em></strong> :: Change the current user to <em>uid</em> which may either
be a number or a name. This can be used from the root account to run
gpg-connect-agent for another user. If <em>uid</em> is not the current UID a
standard PATH is set and the envvar GNUPGHOME is unset. To override
the latter the option <strong>–homedir</strong> can be used. This option has only an
effect when used on the command line. This option has currently no
effect at all on Windows.</li>
<li><strong>–no-ext-connect</strong> :: When using <strong>-S</strong> or <strong>–exec</strong>, <strong>gpg-connect-agent</strong>
connects to the Assuan server in extended mode to allow descriptor
passing. This option makes it use the old mode.</li>
<li><strong>–no-autostart</strong> :: Do not start the gpg-agent or the dirmngr if it
has not yet been started.</li>
<li><strong>–no-history</strong> :: In interactive mode the command line history is
usually saved and restored to and from a file below the GnuPG home
directory. This option inhibits the use of that file.</li>
<li><strong>–agent-program <em>file</em></strong> :: Specify the agent program to be started if
none is running. The default value is determined by running <strong>gpgconf</strong>
with the option <strong>–list-dirs</strong>. Note that the pipe symbol (<strong>|</strong>) is used
for a regression test suite hack and may thus not be used in the file
name.</li>
<li><strong>–dirmngr-program <em>file</em></strong> :: Specify the directory manager (keyserver
client) program to be started if none is running. This has only an
effect if used together with the option <strong>–dirmngr</strong>.</li>
<li><strong>–keyboxd-program <em>file</em></strong> :: Specify the keybox daemon program to be
started if none is running. This has only an effect if used together
with the option <strong>–keyboxd</strong>.</li>
<li><strong>-r <em>file</em></strong><br>
<strong>–run <em>file</em></strong> :: Run the commands from <em>file</em> at startup and then
continue with the regular input method. Note, that commands given on
the command line are executed after this file.</li>
<li><strong>-s</strong><br>
<strong>–subst</strong> :: Run the command <strong>/subst</strong> at startup.</li>
<li><strong>–hex</strong> :: Print data lines in a hex format and the ASCII
representation of non-control characters.</li>
<li><strong>–decode</strong> :: Decode data lines. That is to remove percent escapes but
make sure that a new line always starts with a D and a space.</li>
<li><strong>-u</strong><br>
<strong>–unbuffered</strong> :: Set stdin and stdout into unbuffered I/O mode. This
this sometimes useful for scripting.</li>
</ul>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
CONTROL COMMANDS
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>While reading Assuan commands, gpg-agent also allows a few special
commands to control its operation. These control commands all start with
a slash (<strong>/</strong>).</p>
<dl>
<dt>
<strong><em>echo /args</em></strong>
</dt>
<dd>Just print <em>args</em>.</dd>
<dt>
<strong><em>let /name</em> <em>value</em></strong>
</dt>
<dd>Set the variable <em>name</em> to <em>value</em>. Variables
are only substituted on the input if the <strong>/subst</strong> has been used.
Variables are referenced by prefixing the name with a dollar sign and
optionally include the name in curly braces. The rules for a valid
name are identically to those of the standard bourne shell. This is
not yet enforced but may be in the future. When used with curly braces
no leading or trailing white space is allowed.

If a variable is not found, it is searched in the environment and if
found copied to the table of variables.

Variable functions are available: The name of the function must be
followed by at least one space and the at least one argument. The
following functions are available:</dd>
</dl>
<blockquote>
<dl>
<dt>
<strong>get</strong>
</dt>
<dd>Return a value described by the argument. Available arguments
are:</dd>
</dl>
<blockquote>
<dl>
<dt>
<strong>cwd</strong>
</dt>
<dd>The current working directory.</dd>
<dt>
<strong>homedir</strong>
</dt>
<dd>The gnupg homedir.</dd>
<dt>
<strong>sysconfdir</strong>
</dt>
<dd>GnuPG&#39;s system configuration directory.</dd>
<dt>
<strong>bindir</strong>
</dt>
<dd>GnuPG&#39;s binary directory.</dd>
<dt>
<strong>libdir</strong>
</dt>
<dd>GnuPG&#39;s library directory.</dd>
<dt>
<strong>libexecdir</strong>
</dt>
<dd>GnuPG&#39;s library directory for executable files.</dd>
<dt>
<strong>datadir</strong>
</dt>
<dd>GnuPG&#39;s data directory.</dd>
<dt>
<strong>serverpid</strong>
</dt>
<dd>The PID of the current server. Command <strong>/serverpid</strong>
must have been given to return a useful value.</dd>
</dl>
</blockquote>
<dl>
<dt>
<strong>unescape <em>args</em></strong>
</dt>
<dd>Remove C-style escapes from <em>args</em>. Note that
<strong>\0</strong> and <strong>\x00</strong> terminate the returned string implicitly. The string
to be converted are the entire arguments right behind the delimiting
space of the function name.</dd>
<dt>
?
</dt>
<dd><strong>unpercent <em>args</em></strong><br>
<strong>unpercent+ <em>args</em></strong> :: Remove percent style escaping from <em>args</em>. Note
that <strong>%00</strong> terminates the string implicitly. The string to be
converted are the entire arguments right behind the delimiting space
of the function name. <strong>unpercent+</strong> also maps plus signs to a spaces.</dd>
<dt>
?
</dt>
<dd><strong>percent <em>args</em></strong><br>
<strong>percent+ <em>args</em></strong> :: Escape the <em>args</em> using percent style escaping.
Tabs, formfeeds, linefeeds, carriage returns and colons are escaped.
<strong>percent+</strong> also maps spaces to plus signs.</dd>
<dt>
?
</dt>
<dd><strong>errcode <em>arg</em></strong><br>
<strong>errsource <em>arg</em></strong><br>
<strong>errstring <em>arg</em></strong> :: Assume <em>arg</em> is an integer and evaluate it using
<strong>strtol</strong>. Return the gpg-error error code, error source or a formatted
string with the error code and error source.</dd>
<dt>
?
</dt>
<dd><strong>+</strong><br>
<strong>-</strong><br>
<strong>*</strong><br>
<strong>/</strong><br>
<strong>%</strong> :: Evaluate all arguments as long integers using <strong>strtol</strong> and
apply this operator. A division by zero yields an empty string.</dd>
<dt>
?
</dt>
<dd><strong>!</strong><br>
<strong>|</strong><br>
<strong>&amp;</strong> :: Evaluate all arguments as long integers using <strong>strtol</strong> and
apply the logical operators NOT, OR or AND. The NOT operator works on
the last argument only.</dd>
</dl>
</blockquote>
<dl>
<dt>
<strong><em>definq /name</em> <em>var</em></strong>
</dt>
<dd>Use content of the variable <em>var</em> for
inquiries with <em>name</em>. <em>name</em> may be an asterisk (<strong>*</strong>) to match any
inquiry.</dd>
<dt>
<strong><em>definqfile /name</em> <em>file</em></strong>
</dt>
<dd>Use content of <em>file</em> for inquiries
with <em>name</em>. <em>name</em> may be an asterisk (<strong>*</strong>) to match any inquiry.</dd>
<dt>
<strong><em>definqprog /name</em> <em>prog</em></strong>
</dt>
<dd>Run <em>prog</em> for inquiries matching
<em>name</em> and pass the entire line to it as command line arguments.</dd>
<dt>
<strong><em>datafile /name</em></strong>
</dt>
<dd>Write all data lines from the server to the file
<em>name</em>. The file is opened for writing and created if it does not
exists. An existing file is first truncated to 0. The data written to
the file fully decoded. Using a single dash for <em>name</em> writes to
stdout. The file is kept open until a new file is set using this
command or this command is used without an argument.</dd>
<dt>
<strong>/showdef</strong>
</dt>
<dd>Print all definitions</dd>
<dt>
<strong>/cleardef</strong>
</dt>
<dd>Delete all definitions</dd>
<dt>
<strong><em>sendfd /file</em> <em>mode</em></strong>
</dt>
<dd>Open <em>file</em> in <em>mode</em> (which needs to be a
valid <strong>fopen</strong> mode string) and send the file descriptor to the server.
This is usually followed by a command like <strong>INPUT FD</strong> to set the input
source for other commands.</dd>
<dt>
<strong>/recvfd</strong>
</dt>
<dd>Not yet implemented.</dd>
<dt>
<strong><em>open /var</em> <em>file</em> [/mode/]</strong>
</dt>
<dd>Open <em>file</em> and assign the file
descriptor to <em>var</em>. Warning: This command is experimental and might
change in future versions.</dd>
<dt>
<strong><em>close /fd</em></strong>
</dt>
<dd>Close the file descriptor <em>fd</em>. Warning: This command
is experimental and might change in future versions.</dd>
<dt>
<strong>/showopen</strong>
</dt>
<dd>Show a list of open files.</dd>
<dt>
<strong>/serverpid</strong>
</dt>
<dd>Send the Assuan command <strong>GETINFO pid</strong> to the server
and store the returned PID for internal purposes.</dd>
<dt>
<strong>/sleep</strong>
</dt>
<dd>Sleep for a second.</dd>
<dt>
?
</dt>
<dd><strong>/hex</strong><br>
<strong>/nohex</strong> :: Same as the command line option <strong>–hex</strong>.</dd>
<dt>
?
</dt>
<dd><strong>/decode</strong><br>
<strong>/nodecode</strong> :: Same as the command line option <strong>–decode</strong>.</dd>
<dt>
?
</dt>
<dd><strong>/subst</strong><br>
<strong>/nosubst</strong> :: Enable and disable variable substitution. It defaults to
disabled unless the command line option <strong>–subst</strong> has been used. If
/subst as been enabled once, leading whitespace is removed from input
lines which makes scripts easier to read.</dd>
<dt>
?
</dt>
<dd><strong><em>while /condition</em></strong><br>
<strong>/end</strong> :: These commands provide a way for executing loops. All lines
between the <strong>while</strong> and the corresponding <strong>end</strong> are executed as long
as the evaluation of <em>condition</em> yields a non-zero value or is the
string <strong>true</strong> or <strong>yes</strong>. The evaluation is done by passing <em>condition</em>
to the <strong>strtol</strong> function. Example:</dd>
</dl>
<blockquote>
<pre class="example">
  /subst
  /let i 3
  /while $i
    /echo loop counter is $i
    /let i ${- $i 1}
  /end
</pre>
</blockquote>
<ul>
<li><strong><em>if /condition</em></strong><br>
<strong>/end</strong> :: These commands provide a way for conditional execution. All
lines between the <strong>if</strong> and the corresponding <strong>end</strong> are executed only
if the evaluation of <em>condition</em> yields a non-zero value or is the
string <strong>true</strong> or <strong>yes</strong>. The evaluation is done by passing <em>condition</em>
to the <strong>strtol</strong> function.</li>
<li><strong><em>run /file</em></strong> :: Run commands from <em>file</em>.</li>
<li><strong>/history –clear</strong> :: Clear the command history.</li>
<li><strong>/bye</strong> :: Terminate the connection and the program.</li>
<li><strong>/help</strong> :: Print a list of available control commands.</li>
</ul>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
SEE ALSO
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>*gpg-agent*(1), *scdaemon*(1)</p>
<p>
The full documentation for this tool is maintained as a Texinfo manual.
If GnuPG and the info program are properly installed at your site, the
command</p>
<blockquote>
<pre class="example">
info gnupg
</pre>
</blockquote>
<p>
should give you access to the complete manual including a menu structure
and an index.</p>
</div>
</div>


        </main>
        <footer class="container footer">
            <p>Copyright 2024. All rights reserved.</p>

        </footer>

        
        

        
            <script src="/js/main.js"></script>
    </body>
</html>
