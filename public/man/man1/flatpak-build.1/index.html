<!DOCTYPE html>
<html
    lang="en-us"
    dir="ltr"
>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Manpages - flatpak-build.1 | Technical Notes</title>

    <link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/css/syntax.css">
        
        
    </head>
    <body>
        <header class="container header">
            <span class="header__title">Technical Notes</span>
<button id="menuOpenBtn" class="header__menu-open-btn"><i data-lucide="menu"></i></button>

  <nav id="siteNav">
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/notes/">Notes</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/man/">Manpages</a>
    </li>
    <li>
      <a href="/search/">Search</a>
    </li>
    </ul>
    <button id="menuCloseBtn" class="header__menu-close-btn"><i data-lucide="x"></i></button>
  </nav>


        </header>
        <main class="container">
            
    <h1>Manpages - flatpak-build.1</h1>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
NAME
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>flatpak-build - Build in a directory</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
SYNOPSIS
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p><strong>flatpak build</strong> [OPTION…] DIRECTORY [COMMAND [ARG…]]</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
DESCRIPTION
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>Runs a build command in a directory. DIRECTORY must have been
initialized with <strong>flatpak build-init</strong>.</p>
<p>
The sdk that is specified in the metadata file in the directory is
mounted at /usr and the files and var subdirectories are mounted at /app
and /var, respectively. They are writable, and their contents are
preserved between build commands, to allow accumulating build artifacts
there.</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
OPTIONS
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>The following options are understood:</p>
<p>
<strong>-h</strong>, <strong>–help</strong></p>
<blockquote>
<p>Show help options and exit.</p>
</blockquote>
<p>
<strong>-v</strong>, <strong>–verbose</strong></p>
<blockquote>
<p>Print debug information during command processing.</p>
</blockquote>
<p>
<strong>–ostree-verbose</strong></p>
<blockquote>
<p>Print OSTree debug information during command processing.</p>
</blockquote>
<p>
<strong>-r</strong>, <strong>–runtime</strong></p>
<blockquote>
<p>Use the non-devel runtime that is specified in the application metadata
instead of the devel runtime.</p>
</blockquote>
<p>
<strong>-p</strong>, <strong>–die-with-parent</strong></p>
<blockquote>
<p>Kill the build process and all children when the launching process dies.</p>
</blockquote>
<p>
<strong>–bind-mount=DEST=SOURCE</strong></p>
<blockquote>
<p>Add a custom bind mount in the build namespace. Can be specified
multiple times.</p>
</blockquote>
<p>
<strong>–build-dir=PATH</strong></p>
<blockquote>
<p>Start the build in this directory (default is in the current directory).</p>
</blockquote>
<p>
<strong>–share=SUBSYSTEM</strong></p>
<blockquote>
<p>Share a subsystem with the host session. This overrides the Context
section from the application metadata. SUBSYSTEM must be one of:
network, ipc. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–unshare=SUBSYSTEM</strong></p>
<blockquote>
<p>Dont share a subsystem with the host session. This overrides the Context
section from the application metadata. SUBSYSTEM must be one of:
network, ipc. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–socket=SOCKET</strong></p>
<blockquote>
<p>Expose a well-known socket to the application. This overrides to the
Context section from the application metadata. SOCKET must be one of:
x11, wayland, fallback-x11, pulseaudio, system-bus, session-bus,
ssh-auth, pcsc, cups, gpg-agent. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–nosocket=SOCKET</strong></p>
<blockquote>
<p>Dont expose a well-known socket to the application. This overrides to
the Context section from the application metadata. SOCKET must be one
of: x11, wayland, fallback-x11, pulseaudio, system-bus, session-bus,
ssh-auth, pcsc, cups, gpg-agent. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–device=DEVICE</strong></p>
<blockquote>
<p>Expose a device to the application. This overrides to the Context
section from the application metadata. DEVICE must be one of: dri, kvm,
shm, all. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–nodevice=DEVICE</strong></p>
<blockquote>
<p>Dont expose a device to the application. This overrides to the Context
section from the application metadata. DEVICE must be one of: dri, kvm,
shm, all. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–allow=FEATURE</strong></p>
<blockquote>
<p>Allow access to a specific feature. This updates the [Context] group in
the metadata. FEATURE must be one of: devel, multiarch, bluetooth,
canbus, per-app-dev-shm. This option can be used multiple times.</p>
<p>
See *flatpak-build-finish*(1) for the meaning of the various features.</p>
</blockquote>
<p>
<strong>–disallow=FEATURE</strong></p>
<blockquote>
<p>Disallow access to a specific feature. This updates the [Context] group
in the metadata. FEATURE must be one of: devel, multiarch, bluetooth,
canbus, per-app-dev-shm. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–filesystem=FILESYSTEM[:ro|:create]</strong></p>
<blockquote>
<p>Allow the application access to a subset of the filesystem. This
overrides to the Context section from the application metadata.
FILESYSTEM can be one of: home, host, host-os, host-etc, xdg-desktop,
xdg-documents, xdg-download, xdg-music, xdg-pictures, xdg-public-share,
xdg-templates, xdg-videos, xdg-run, xdg-config, xdg-cache, xdg-data, an
absolute path, or a homedir-relative path like ~/dir or paths relative
to the xdg dirs, like xdg-download/subdir. The optional :ro suffix
indicates that the location will be read-only. The optional :create
suffix indicates that the location will be read-write and created if it
doesnt exist. This option can be used multiple times. See the &#34;[Context]
filesystems&#34; list in *flatpak-metadata*(5) for details of the meanings
of these filesystems.</p>
</blockquote>
<p>
<strong>–nofilesystem=FILESYSTEM</strong></p>
<blockquote>
<p>Remove access to the specified subset of the filesystem from the
application. This overrides to the Context section from the application
metadata. FILESYSTEM can be one of: home, host, host-os, host-etc,
xdg-desktop, xdg-documents, xdg-download, xdg-music, xdg-pictures,
xdg-public-share, xdg-templates, xdg-videos, an absolute path, or a
homedir-relative path like ~/dir. This option can be used multiple
times.</p>
</blockquote>
<p>
<strong>–with-appdir</strong></p>
<blockquote>
<p>Expose and configure access to the per-app storage directory in
$HOME/.var/app. This is not normally useful when building, but helps
when testing built apps.</p>
</blockquote>
<p>
<strong>–add-policy=SUBSYSTEM.KEY=VALUE</strong></p>
<blockquote>
<p>Add generic policy option. For example, &#34;–add-policy=subsystem.key=v1
–add-policy=subsystem.key=v2&#34; would map to this metadata:</p>
<blockquote>
<pre class="example">
[Policy subsystem]
key=v1;v2;
</pre>
</blockquote>
<p>
This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–remove-policy=SUBSYSTEM.KEY=VALUE</strong></p>
<blockquote>
<p>Remove generic policy option. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–env=VAR=VALUE</strong></p>
<blockquote>
<p>Set an environment variable in the application. This overrides to the
Context section from the application metadata. This option can be used
multiple times.</p>
</blockquote>
<p>
<strong>–unset-env=VAR</strong></p>
<blockquote>
<p>Unset an environment variable in the application. This overrides the
unset-environment entry in the [Context] group of the metadata, and the
[Environment] group. This option can be used multiple times.</p>
</blockquote>
<p>
*–env-fd=*/FD/</p>
<blockquote>
<p>Read environment variables from the file descriptor <em>FD</em>, and set them
as if via <strong>–env</strong>. This can be used to avoid environment variables and
their values becoming visible to other users.</p>
<p>
Each environment variable is in the form <em>VAR/=/VALUE</em> followed by a
zero byte. This is the same format used by env -0 and /proc/*/environ.</p>
</blockquote>
<p>
<strong>–own-name=NAME</strong></p>
<blockquote>
<p>Allow the application to own the well-known name NAME on the session
bus. This overrides to the Context section from the application
metadata. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–talk-name=NAME</strong></p>
<blockquote>
<p>Allow the application to talk to the well-known name NAME on the session
bus. This overrides to the Context section from the application
metadata. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–system-own-name=NAME</strong></p>
<blockquote>
<p>Allow the application to own the well-known name NAME on the system bus.
This overrides to the Context section from the application metadata.
This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–system-talk-name=NAME</strong></p>
<blockquote>
<p>Allow the application to talk to the well-known name NAME on the system
bus. This overrides to the Context section from the application
metadata. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–persist=FILENAME</strong></p>
<blockquote>
<p>If the application doesnt have access to the real homedir, make the
(homedir-relative) path FILENAME a bind mount to the corresponding path
in the per-application directory, allowing that location to be used for
persistent data. This overrides to the Context section from the
application metadata. This option can be used multiple times.</p>
</blockquote>
<p>
<strong>–sdk-dir=DIR</strong></p>
<blockquote>
<p>Normally if there is a usr directory in the build dir, this is used for
the runtime files (this can be created by <strong>–writable-sdk</strong> or
<strong>–type=runtime</strong> arguments to build-init). If you specify <strong>–sdk-dir</strong>,
this directory will be used instead. Use this if you passed <strong>–sdk-dir</strong>
to build-init.</p>
</blockquote>
<p>
<strong>–readonly</strong></p>
<blockquote>
<p>Mount the normally writable destination directories read-only. This can
be useful if you want to run something in the sandbox but guarantee that
it doesnt affect the build results. For example tests.</p>
</blockquote>
<p>
<strong>–metadata=FILE</strong></p>
<blockquote>
<p>Use the specified filename as metadata in the exported app instead of
the default file (called metadata). This is useful if you build multiple
things from a single build tree (such as both a platform and a sdk).</p>
</blockquote>
<p>
<strong>–log-session-bus</strong></p>
<blockquote>
<p>Log session bus traffic. This can be useful to see what access you need
to allow in your D-Bus policy.</p>
</blockquote>
<p>
<strong>–log-system-bus</strong></p>
<blockquote>
<p>Log system bus traffic. This can be useful to see what access you need
to allow in your D-Bus policy.</p>
</blockquote>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
EXAMPLES
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p><strong>$ flatpak build /build/my-app rpmbuild my-app.src.rpm</strong></p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
SEE ALSO
</h2>
<div id="outline-text-headline-6" class="outline-text-2">
<p>*flatpak*(1), *flatpak-build-init*(1), *flatpak-build-finish*(1),
*flatpak-build-export*(1)</p>
</div>
</div>


        </main>
        <footer class="container footer">
            <p>Copyright 2024. All rights reserved.</p>

        </footer>

        
        

        
            <script src="/js/main.js"></script>
    </body>
</html>
