<!DOCTYPE html>
<html
    lang="en-us"
    dir="ltr"
>
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Manpages - zshmisc.1 | Technical Notes</title>

      <link rel="stylesheet" href="/css/main.min.a9ecaac9d4f7845fc2de4738f7709cab0bd1c3d19c3466fadd637a6987603257.css" integrity="sha256-qeyqydT3hF/C3kc493CcqwvRw9GcNGb63WN6aYdgMlc=" crossorigin="anonymous">


<link rel="stylesheet" href="/css/syntax.css">
        
        
    </head>
    <body>
        <header class="container header">
            <span class="header__title">Technical Notes</span>
<button id="menuOpenBtn" class="header__menu-open-btn"><i data-lucide="menu"></i></button>

  <nav id="siteNav">
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/notes/">Notes</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/man/">Manpages</a>
    </li>
    <li>
      <a href="/search/">Search</a>
    </li>
    </ul>
    <button id="menuCloseBtn" class="header__menu-close-btn"><i data-lucide="x"></i></button>
  </nav>


        </header>
        <main class="container">
            
    <h1>Manpages - zshmisc.1</h1>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
NAME
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>zshmisc - everything and then some</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
SIMPLE COMMANDS &amp; PIPELINES
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>A <em>simple command</em> is a sequence of optional parameter assignments
followed by blank-separated words, with optional redirections
interspersed. For a description of assignment, see the beginning of
/zshparam/(1).</p>
<p>
The first word is the command to be executed, and the remaining words,
if any, are arguments to the command. If a command name is given, the
parameter assignments modify the environment of the command when it is
executed. The value of a simple command is its exit status, or 128 plus
the signal number if terminated by a signal. For example,</p>
<blockquote>
<pre class="example">
echo foo
</pre>
</blockquote>
<p>
is a simple command with arguments.</p>
<p>
A <em>pipeline</em> is either a simple command, or a sequence of two or more
simple commands where each command is separated from the next by `*|*&#39;
or `*|&amp;*&#39;. Where commands are separated by `*|*&#39;, the standard output of
the first command is connected to the standard input of the next. `*|&amp;*&#39;
is shorthand for `*2&gt;&amp;1 |*&#39;, which connects both the standard output and
the standard error of the command to the standard input of the next. The
value of a pipeline is the value of the last command, unless the
pipeline is preceded by `*!*&#39; in which case the value is the logical
inverse of the value of the last command. For example,</p>
<blockquote>
<pre class="example">
echo foo | sed &#39;s/foo/bar/&#39;
</pre>
</blockquote>
<p>
is a pipeline, where the output (`*foo*&#39; plus a newline) of the first
command will be passed to the input of the second.</p>
<p>
If a pipeline is preceded by `*coproc*&#39;, it is executed as a coprocess;
a two-way pipe is established between it and the parent shell. The shell
can read from or write to the coprocess by means of the `*&gt;&amp;p*&#39; and
`*&lt;&amp;p*&#39; redirection operators or with `*print -p*&#39; and `*read -p*&#39;. A
pipeline cannot be preceded by both `*coproc*&#39; and `*!*&#39;. If job control
is active, the coprocess can be treated in other than input and output
as an ordinary background job.</p>
<p>
A <em>sublist</em> is either a single pipeline, or a sequence of two or more
pipelines separated by `*&amp;&amp;*&#39; or `*||*&#39;. If two pipelines are separated
by `*&amp;&amp;*&#39;, the second pipeline is executed only if the first succeeds
(returns a zero status). If two pipelines are separated by `*||*&#39;, the
second is executed only if the first fails (returns a nonzero status).
Both operators have equal precedence and are left associative. The value
of the sublist is the value of the last pipeline executed. For example,</p>
<blockquote>
<pre class="example">
dmesg | grep panic &amp;&amp; print yes
</pre>
</blockquote>
<p>
is a sublist consisting of two pipelines, the second just a simple
command which will be executed if and only if the <strong>grep</strong> command returns
a zero status. If it does not, the value of the sublist is that return
status, else it is the status returned by the <strong>print</strong> (almost certainly
zero).</p>
<p>
A <em>list</em> is a sequence of zero or more sublists, in which each sublist
is terminated by `*;*&#39;, `*&amp;*&#39;, `*&amp;|*&#39;, `*&amp;!*&#39;, or a newline. This
terminator may optionally be omitted from the last sublist in the list
when the list appears as a complex command inside `*(<strong>…</strong>)*&#39; or
`*{<strong>…</strong>}*&#39;. When a sublist is terminated by `*;*&#39; or newline, the shell
waits for it to finish before executing the next sublist. If a sublist
is terminated by a `*&amp;*&#39;, `*&amp;|*&#39;, or `*&amp;!*&#39;, the shell executes the last
pipeline in it in the background, and does not wait for it to finish
(note the difference from other shells which execute the whole sublist
in the background). A backgrounded pipeline returns a status of zero.</p>
<p>
More generally, a list can be seen as a set of any shell commands
whatsoever, including the complex commands below; this is implied
wherever the word `list&#39; appears in later descriptions. For example, the
commands in a shell function form a special sort of list.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
PRECOMMAND MODIFIERS
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>A simple command may be preceded by a <em>precommand modifier</em>, which will
alter how the command is interpreted. These modifiers are shell builtin
commands with the exception of <strong>nocorrect</strong> which is a reserved word.</p>
<p>
<strong>-</strong> The command is executed with a `*-<strong>&#39; prepended to its *argv[0]</strong>
string.</p>
<dl>
<dt>
<strong>builtin</strong>
</dt>
<dd>The command word is taken to be the name of a builtin
command, rather than a shell function or external command.</dd>
<dt>
<strong>command</strong> [ <strong>-pvV</strong> ]
</dt>
<dd>The command word is taken to be the name of an
external command, rather than a shell function or builtin. If the
<strong>POSIX_BUILTINS</strong> option is set, builtins will also be executed but
certain special properties of them are suppressed. The <strong>-p</strong> flag
causes a default path to be searched instead of that in <strong>$path</strong>. With
the <strong>-v</strong> flag, <strong>command</strong> is similar to <strong>whence</strong> and with <strong>-V</strong>, it is
equivalent to <strong>whence</strong> -v.</dd>
<dt>
<strong>exec</strong> [ <strong>-cl</strong> ] [ <strong>-a</strong> <em>argv0</em> ]
</dt>
<dd>The following command together
with any arguments is run in place of the current process, rather than
as a sub-process. The shell does not fork and is replaced. The shell
does not invoke <strong>TRAPEXIT</strong>, nor does it source <strong>zlogout</strong> files. The
options are provided for compatibility with other shells.

The <strong>-c</strong> option clears the environment.

The <strong>-l</strong> option is equivalent to the <strong>-</strong> precommand modifier, to treat
the replacement command as a login shell; the command is executed with
a <strong>-</strong> prepended to its <strong>argv[0]</strong> string. This flag has no effect if
used together with the <strong>-a</strong> option.

The <strong>-a</strong> option is used to specify explicitly the <strong>argv[0]</strong> string
(the name of the command as seen by the process itself) to be used by
the replacement command and is directly equivalent to setting a value
for the <strong>ARGV0</strong> environment variable.</dd>
<dt>
<strong>nocorrect</strong>
</dt>
<dd>Spelling correction is not done on any of the words.
This must appear before any other precommand modifier, as it is
interpreted immediately, before any parsing is done. It has no effect
in non-interactive shells.</dd>
<dt>
<strong>noglob</strong>
</dt>
<dd>Filename generation (globbing) is not performed on any of
the words.</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
COMPLEX COMMANDS
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>A <em>complex command</em> in zsh is one of the following:</p>
<p>
<strong>if</strong> <em>list</em> <strong>then</strong> <em>list</em> [ <strong>elif</strong> <em>list</em> <strong>then</strong> <em>list</em> ] … [ <strong>else</strong>
<em>list</em> ] <strong>fi</strong> The <strong>if</strong> <em>list</em> is executed, and if it returns a zero exit
status, the <strong>then</strong> <em>list</em> is executed. Otherwise, the <strong>elif</strong> <em>list</em> is
executed and if its status is zero, the <strong>then</strong> <em>list</em> is executed. If
each <strong>elif</strong> <em>list</em> returns nonzero status, the <strong>else</strong> <em>list</em> is
executed.</p>
<ul>
<li><strong>for</strong> <em>name</em> … [ <strong>in</strong> <em>word</em> … ] <em>term</em> <strong>do</strong> <em>list</em>
<strong>done</strong> :: Expand the list of <em>word/s, and set the parameter /name</em> to
each of them in turn, executing <em>list</em> each time. If the `*in* <em>word</em>&#39;
is omitted, use the positional parameters instead of the /word/s.

The <em>term</em> consists of one or more newline or <strong>;</strong> which terminate the
<em>word/s, and are optional when the `*in* /word</em>&#39; is omitted.

More than one parameter <em>name</em> can appear before the list of <em>word/s.
If /N</em> <em>name/s are given, then on each execution of the loop the next
/N</em> /word/s are assigned to the corresponding parameters. If there are
more /name/s than remaining /word/s, the remaining parameters are each
set to the empty string. Execution of the loop ends when there is no
remaining <em>word</em> to assign to the first <em>name</em>. It is only possible
for <strong>in</strong> to appear as the first <em>name</em> in the list, else it will be
treated as marking the end of the list.</li>
<li><strong>for ((</strong> [/expr1/] <strong>;</strong> [/expr2/] <strong>;</strong> [/expr3/] <strong>)) do</strong> <em>list</em>
<strong>done</strong> :: The arithmetic expression <em>expr1</em> is evaluated first (see
the section `Arithmetic Evaluation&#39;). The arithmetic expression
<em>expr2</em> is repeatedly evaluated until it evaluates to zero and when
non-zero, <em>list</em> is executed and the arithmetic expression <em>expr3</em>
evaluated. If any expression is omitted, then it behaves as if it
evaluated to 1.</li>
<li><strong>while</strong> <em>list</em> <strong>do</strong> <em>list</em> <strong>done</strong> :: Execute the <strong>do</strong> <em>list</em> as long
as the <strong>while</strong> <em>list</em> returns a zero exit status.</li>
<li><strong>until</strong> <em>list</em> <strong>do</strong> <em>list</em> <strong>done</strong> :: Execute the <strong>do</strong> <em>list</em> as long
as <strong>until</strong> <em>list</em> returns a nonzero exit status.</li>
<li><strong>repeat</strong> <em>word</em> <strong>do</strong> <em>list</em> <strong>done</strong> :: <em>word</em> is expanded and treated
as an arithmetic expression, which must evaluate to a number <em>n</em>.
<em>list</em> is then executed <em>n</em> times.

The <strong>repeat</strong> syntax is disabled by default when the shell starts in a
mode emulating another shell. It can be enabled with the command
`*enable -r repeat*&#39;</li>
<li><strong>case</strong> <em>word</em> <strong>in</strong> [ [*(<strong>] <em>pattern</em> [ *|</strong> <em>pattern</em> ] … <strong>)</strong> <em>list</em>
(<strong>;;*|</strong>;&amp;*|*;|*) ] … <strong>esac</strong> :: Execute the <em>list</em> associated with
the first <em>pattern</em> that matches <em>word</em>, if any. The form of the
patterns is the same as that used for filename generation. See the
section `Filename Generation&#39;.

Note further that, unless the <strong>SH_GLOB</strong> option is set, the whole
pattern with alternatives is treated by the shell as equivalent to a
group of patterns within parentheses, although white space may appear
about the parentheses and the vertical bar and will be stripped from
the pattern at those points. White space may appear elsewhere in the
pattern; this is not stripped. If the <strong>SH_GLOB</strong> option is set, so that
an opening parenthesis can be unambiguously treated as part of the
case syntax, the expression is parsed into separate words and these
are treated as strict alternatives (as in other shells).

If the <em>list</em> that is executed is terminated with <strong>;&amp;</strong> rather than
<strong>;;</strong>, the following list is also executed. The rule for the terminator
of the following list <strong>;;</strong>, <strong>;&amp;</strong> or <strong>;|</strong> is applied unless the <strong>esac</strong>
is reached.

If the <em>list</em> that is executed is terminated with <strong>;|</strong> the shell
continues to scan the <em>pattern/s looking for the next match, executing
the corresponding /list</em>, and applying the rule for the corresponding
terminator <strong>;;</strong>, <strong>;&amp;</strong> or <strong>;|</strong>. Note that <em>word</em> is not re-expanded;
all applicable <em>pattern/s are tested with the same /word</em>.</li>
<li><strong>select</strong> <em>name</em> [ <strong>in</strong> <em>word</em> … <em>term</em> ] <strong>do</strong> <em>list</em> <strong>done</strong> :: where
<em>term</em> is one or more newline or <strong>;</strong> to terminate the <em>word/s. Print
the set of /word/s, each preceded by a number. If the <strong>in</strong> /word</em> is
omitted, use the positional parameters. The <strong>PROMPT3</strong> prompt is
printed and a line is read from the line editor if the shell is
interactive and that is active, or else standard input. If this line
consists of the number of one of the listed <em>word/s, then the
parameter /name</em> is set to the <em>word</em> corresponding to this number. If
this line is empty, the selection list is printed again. Otherwise,
the value of the parameter <em>name</em> is set to null. The contents of the
line read from standard input is saved in the parameter <strong>REPLY</strong>.
<em>list</em> is executed for each selection until a break or end-of-file is
encountered.</li>
<li><strong>(</strong> <em>list</em> <strong>)</strong> :: Execute <em>list</em> in a subshell. Traps set by the
<strong>trap</strong> builtin are reset to their default values while executing
<em>list</em>; an exception is that ignored signals will continue to be
ignored if the option <strong>POSIXTRAPS</strong> is set.</li>
<li><strong>{</strong> <em>list</em> <strong>}</strong> :: Execute <em>list</em>.</li>
<li>
<p><strong>{</strong> <em>try-list</em> <strong>} always {</strong> <em>always-list</em> <strong>}</strong> :: First execute
<em>try-list</em>. Regardless of errors, or <strong>break</strong> or <strong>continue</strong> commands
encountered within <em>try-list</em>, execute <em>always-list</em>. Execution then
continues from the result of the execution of <em>try-list</em>; in other
words, any error, or <strong>break</strong> or <strong>continue</strong> command is treated in the
normal way, as if <em>always-list</em> were not present. The two chunks of
code are referred to as the `try block&#39; and the `always block&#39;.</p>
<p>
Optional newlines or semicolons may appear after the <strong>always</strong>; note,
however, that they may <em>not</em> appear between the preceding closing
brace and the <strong>always</strong>.</p>
<p>
An `error&#39; in this context is a condition such as a syntax error which
causes the shell to abort execution of the current function, script,
or list. Syntax errors encountered while the shell is parsing the code
do not cause the <em>always-list</em> to be executed. For example, an
erroneously constructed <strong>if</strong> block in <em>try-list</em> would cause the shell
to abort during parsing, so that <em>always-list</em> would not be executed,
while an erroneous substitution such as <strong>${*foo</strong>}* would cause a
run-time error, after which <em>always-list</em> would be executed.</p>
<p>
An error condition can be tested and reset with the special integer
variable <strong>TRY_BLOCK_ERROR</strong>. Outside an <em>always-list</em> the value is
irrelevant, but it is initialised to <strong>-1</strong>. Inside <em>always-list</em>, the
value is 1 if an error occurred in the <em>try-list</em>, else 0. If
<strong>TRY_BLOCK_ERROR</strong> is set to 0 during the <em>always-list</em>, the error
condition caused by the <em>try-list</em> is reset, and shell execution
continues normally after the end of <em>always-list</em>. Altering the value
during the <em>try-list</em> is not useful (unless this forms part of an
enclosing <strong>always</strong> block).</p>
<p>
Regardless of <strong>TRY_BLOCK_ERROR</strong>, after the end of <em>always-list</em> the
normal shell status <strong>$?</strong> is the value returned from <em>try-list</em>. This
will be non-zero if there was an error, even if <strong>TRY_BLOCK_ERROR</strong> was
set to zero.</p>
<p>
The following executes the given code, ignoring any errors it causes.
This is an alternative to the usual convention of protecting code by
executing it in a subshell.</p>
<blockquote>
<pre class="example">
{
    # code which may cause an error
  } always {
    # This code is executed regardless of the error.
    (( TRY_BLOCK_ERROR = 0 ))
}
# The error condition has been reset.
</pre>
</blockquote>
<p>
When a <strong>try</strong> block occurs outside of any function, a <strong>return</strong> or a
<strong>exit</strong> encountered in <em>try-list</em> does <em>not</em> cause the execution of
<em>always-list</em>. Instead, the shell exits immediately after any <strong>EXIT</strong>
trap has been executed. Otherwise, a <strong>return</strong> command encountered in
<em>try-list</em> will cause the execution of <em>always-list</em>, just like
<strong>break</strong> and <strong>continue</strong>.</p>
</li>
</ul>
<p><strong>function</strong> [ <strong>-T</strong> ] <em>word</em> … [ <strong>()</strong> ] [ <em>term</em> ] <strong>{</strong> <em>list</em> <strong>}</strong></p>
<p>
<em>word</em> … <strong>()</strong> [ <em>term</em> ] <strong>{</strong> <em>list</em> <strong>}</strong></p>
<p>
<em>word</em> … <strong>()</strong> [ <em>term</em> ] <em>command</em> where <em>term</em> is one or more newline
or <strong>;</strong>. Define a function which is referenced by any one of <em>word</em>.
Normally, only one <em>word</em> is provided; multiple <em>word/s are usually only
useful for setting traps. The body of the function is the /list</em> between
the <strong>{</strong> and <strong>}</strong>. See the section `Functions&#39;.</p>
<blockquote>
<p>The options of <strong>function</strong> have the following meanings:</p>
<p>
-T Enable tracing for this function, as though with <strong>functions -T</strong>. See
the documentation of the <strong>-f</strong> option to the <strong>typeset</strong> builtin, in
/zshbuiltins/(1).</p>
<p>
If the option <strong>SH_GLOB</strong> is set for compatibility with other shells, then
whitespace may appear between the left and right parentheses when there
is a single <em>word</em>; otherwise, the parentheses will be treated as
forming a globbing pattern in that case.</p>
<p>
In any of the forms above, a redirection may appear outside the function
body, for example</p>
<blockquote>
<pre class="example">
func() { ... } 2&gt;&amp;1
</pre>
</blockquote>
<p>
The redirection is stored with the function and applied whenever the
function is executed. Any variables in the redirection are expanded at
the point the function is executed, but outside the function scope.</p>
</blockquote>
<dl>
<dt>
<strong>time</strong> [ <em>pipeline</em> ]
</dt>
<dd>The <em>pipeline</em> is executed, and timing
statistics are reported on the standard error in the form specified by
the <strong>TIMEFMT</strong> parameter. If <em>pipeline</em> is omitted, print statistics
about the shell process and its children.</dd>
<dt>
<strong>[[</strong> <em>exp</em> <strong>]]</strong>
</dt>
<dd>Evaluates the conditional expression <em>exp</em> and
return a zero exit status if it is true. See the section `Conditional
Expressions&#39; for a description of <em>exp</em>.</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
ALTERNATE FORMS FOR COMPLEX COMMANDS
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>Many of zsh&#39;s complex commands have alternate forms. These are
non-standard and are likely not to be obvious even to seasoned shell
programmers; they should not be used anywhere that portability of shell
code is a concern.</p>
<p>
The short versions below only work if <em>sublist</em> is of the form `*{*
<em>list</em> <strong>}</strong>&#39; or if the <strong>SHORT_LOOPS</strong> option is set. For the <strong>if</strong>, <strong>while</strong>
and <strong>until</strong> commands, in both these cases the test part of the loop must
also be suitably delimited, such as by `*<a href="* /.../ *">* /.../ *</a>*&#39; or `*((* <em>…</em>
<strong>))</strong>&#39;, else the end of the test will not be recognized. For the <strong>for</strong>,
<strong>repeat</strong>, <strong>case</strong> and <strong>select</strong> commands no such special form for the
arguments is necessary, but the other condition (the special form of
<em>sublist</em> or use of the <strong>SHORT_LOOPS</strong> option) still applies. The
<strong>SHORT_REPEAT</strong> option is available to enable the short version only for
the <strong>repeat</strong> command.</p>
<p>
<strong>if</strong> <em>list</em> <strong>{</strong> <em>list</em> <strong>}</strong> [ <strong>elif</strong> <em>list</em> <strong>{</strong> <em>list</em> <strong>}</strong> ] … [ <strong>else
{</strong> <em>list</em> <strong>}</strong> ] An alternate form of <strong>if</strong>. The rules mean that</p>
<blockquote>
<blockquote>
<pre class="example">
if [[ -o ignorebraces ]] {
  print yes
}
</pre>
</blockquote>
<p>
works, but</p>
<blockquote>
<pre class="example">
if true {  # Does not work!
  print yes
}
</pre>
</blockquote>
<p>
does <em>not</em>, since the test is not suitably delimited.</p>
</blockquote>
<dl>
<dt>
<strong>if</strong> <em>list</em> <em>sublist</em>
</dt>
<dd>A short form of the alternate <strong>if</strong>. The same
limitations on the form of <em>list</em> apply as for the previous form.</dd>
<dt>
<strong>for</strong> <em>name</em> … <strong>(</strong> <em>word</em> … <strong>)</strong> <em>sublist</em>
</dt>
<dd>A short form of
<strong>for</strong>.</dd>
<dt>
<strong>for</strong> <em>name</em> … [ <strong>in</strong> <em>word</em> … ] <em>term</em> <em>sublist</em>
</dt>
<dd>where <em>term</em>
is at least one newline or <strong>;</strong>. Another short form of <strong>for</strong>.</dd>
<dt>
<strong>for ((</strong> [/expr1/] <strong>;</strong> [/expr2/] <strong>;</strong> [/expr3/] <strong>))</strong> <em>sublist</em>
</dt>
<dd>A
short form of the arithmetic <strong>for</strong> command.</dd>
<dt>
<strong>foreach</strong> <em>name</em> … <strong>(</strong> <em>word</em> … <strong>)</strong> <em>list</em> <strong>end</strong>
</dt>
<dd>Another form
of <strong>for</strong>.</dd>
<dt>
<strong>while</strong> <em>list</em> <strong>{</strong> <em>list</em> <strong>}</strong>
</dt>
<dd>An alternative form of <strong>while</strong>. Note
the limitations on the form of <em>list</em> mentioned above.</dd>
<dt>
<strong>until</strong> <em>list</em> <strong>{</strong> <em>list</em> <strong>}</strong>
</dt>
<dd>An alternative form of <strong>until</strong>. Note
the limitations on the form of <em>list</em> mentioned above.</dd>
<dt>
<strong>repeat</strong> <em>word</em> <em>sublist</em>
</dt>
<dd>This is a short form of <strong>repeat</strong>.</dd>
<dt>
?
</dt>
<dd><strong>case</strong> <em>word</em> <strong>{</strong> [ [*(<strong>] <em>pattern</em> [ *|</strong> <em>pattern</em> ] … <strong>)</strong> <em>list</em>
(<strong>;;*|</strong>;&amp;*|*;|*) ] … <strong>}</strong> :: An alternative form of <strong>case</strong>.</dd>
<dt>
<strong>select</strong> <em>name</em> [ <strong>in</strong> <em>word</em> … <em>term</em> ] <em>sublist</em>
</dt>
<dd>where <em>term</em>
is at least one newline or <strong>;</strong>. A short form of <strong>select</strong>.</dd>
<dt>
<strong>function</strong> <em>word</em> … [ <strong>()</strong> ] [ <em>term</em> ] <em>sublist</em>
</dt>
<dd>This is a short
form of <strong>function</strong>.</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
RESERVED WORDS
</h2>
<div id="outline-text-headline-6" class="outline-text-2">
<p>The following words are recognized as reserved words when used as the
first word of a command unless quoted or disabled using <strong>disable -r</strong>:</p>
<p>
<strong>do done esac then elif else fi for case</strong> if while function repeat time
until select coproc nocorrect foreach end ! [[ { } declare export float
integer local readonly typeset</p>
<p>
Additionally, `*}*&#39; is recognized in any position if neither the
<strong>IGNORE_BRACES</strong> option nor the <strong>IGNORE_CLOSE_BRACES</strong> option is set.</p>
</div>
</div>
<div id="outline-container-headline-7" class="outline-2">
<h2 id="headline-7">
ERRORS
</h2>
<div id="outline-text-headline-7" class="outline-text-2">
<p>Certain errors are treated as fatal by the shell: in an interactive
shell, they cause control to return to the command line, and in a
non-interactive shell they cause the shell to be aborted. In older
versions of zsh, a non-interactive shell running a script would not
abort completely, but would resume execution at the next command to be
read from the script, skipping the remainder of any functions or shell
constructs such as loops or conditions; this somewhat illogical
behaviour can be recovered by setting the option <strong>CONTINUE_ON_ERROR</strong>.</p>
<p>
Fatal errors found in non-interactive shells include:</p>
<p>
· Failure to parse shell options passed when invoking the shell</p>
<dl>
<dt>
·
</dt>
<dd>Failure to change options with the <strong>set</strong> builtin</dd>
<dt>
·
</dt>
<dd>Parse errors of all sorts, including failures to parse
mathematical expressions</dd>
<dt>
·
</dt>
<dd>Failures to set or modify variable behaviour with <strong>typeset</strong>,
<strong>local</strong>, <strong>declare</strong>, <strong>export</strong>, <strong>integer</strong>, <strong>float</strong></dd>
<dt>
·
</dt>
<dd>Execution of incorrectly positioned loop control structures
(<strong>continue</strong>, <strong>break</strong>)</dd>
<dt>
·
</dt>
<dd>Attempts to use regular expression with no regular expression
module available</dd>
<dt>
·
</dt>
<dd>Disallowed operations when the <strong>RESTRICTED</strong> options is set</dd>
<dt>
·
</dt>
<dd>Failure to create a pipe needed for a pipeline</dd>
<dt>
·
</dt>
<dd>Failure to create a multio</dd>
<dt>
·
</dt>
<dd>Failure to autoload a module needed for a declared shell feature</dd>
<dt>
·
</dt>
<dd>Errors creating command or process substitutions</dd>
<dt>
·
</dt>
<dd>Syntax errors in glob qualifiers</dd>
<dt>
·
</dt>
<dd>File generation errors where not caught by the option
<strong>BAD_PATTERN</strong></dd>
<dt>
·
</dt>
<dd>All bad patterns used for matching within case statements</dd>
<dt>
·
</dt>
<dd>File generation failures where not caused by <strong>NO_MATCH</strong> or
similar options</dd>
<dt>
·
</dt>
<dd>All file generation errors where the pattern was used to create a
multio</dd>
<dt>
·
</dt>
<dd>Memory errors where detected by the shell</dd>
<dt>
·
</dt>
<dd>Invalid subscripts to shell variables</dd>
<dt>
·
</dt>
<dd>Attempts to assign read-only variables</dd>
<dt>
·
</dt>
<dd>Logical errors with variables such as assignment to the wrong
type</dd>
<dt>
·
</dt>
<dd>Use of invalid variable names</dd>
<dt>
·
</dt>
<dd>Errors in variable substitution syntax</dd>
<dt>
·
</dt>
<dd>Failure to convert characters in <strong>$&#39;</strong>…*&#39;* expressions</dd>
</dl>
<p>If the <strong>POSIX_BUILTINS</strong> option is set, more errors associated with shell
builtin commands are treated as fatal, as specified by the POSIX
standard.</p>
</div>
</div>
<div id="outline-container-headline-8" class="outline-2">
<h2 id="headline-8">
COMMENTS
</h2>
<div id="outline-text-headline-8" class="outline-text-2">
<p>In non-interactive shells, or in interactive shells with the
<strong>INTERACTIVE_COMMENTS</strong> option set, a word beginning with the third
character of the <strong>histchars</strong> parameter (`*#*&#39; by default) causes that
word and all the following characters up to a newline to be ignored.</p>
</div>
</div>
<div id="outline-container-headline-9" class="outline-2">
<h2 id="headline-9">
ALIASING
</h2>
<div id="outline-text-headline-9" class="outline-text-2">
<p>Every eligible <em>word</em> in the shell input is checked to see if there is
an alias defined for it. If so, it is replaced by the text of the alias
if it is in command position (if it could be the first word of a simple
command), or if the alias is global. If the replacement text ends with a
space, the next word in the shell input is always eligible for purposes
of alias expansion.</p>
<p>
It is an error for the function name, <em>word</em>, in the sh-compatible
function definition syntax `/word/ <strong>()</strong> …&#39; to be a word that resulted
from alias expansion, unless the <strong>ALIAS_FUNC_DEF</strong> option is set.</p>
<p>
An alias is defined using the <strong>alias</strong> builtin; global aliases may be
defined using the <strong>-g</strong> option to that builtin.</p>
<p>
A <em>word</em> is defined as:</p>
<p>
· Any plain string or glob pattern</p>
<dl>
<dt>
·
</dt>
<dd>Any quoted string, using any quoting method (note that the quotes
must be part of the alias definition for this to be eligible)</dd>
<dt>
·
</dt>
<dd>Any parameter reference or command substitution</dd>
<dt>
·
</dt>
<dd>Any series of the foregoing, concatenated without whitespace or
other tokens between them</dd>
<dt>
·
</dt>
<dd>Any reserved word (<strong>case</strong>, <strong>do</strong>, <strong>else</strong>, etc.)</dd>
<dt>
·
</dt>
<dd>With global aliasing, any command separator, any redirection
operator, and `*(<strong>&#39; or `</strong>)*&#39; when not part of a glob pattern</dd>
</dl>
<p>Alias expansion is done on the shell input before any other expansion
except history expansion. Therefore, if an alias is defined for the word
<strong>foo</strong>, alias expansion may be avoided by quoting part of the word, e.g.
<strong>\foo</strong>. Any form of quoting works, although there is nothing to prevent
an alias being defined for the quoted form such as <strong>\foo</strong> as well.</p>
<p>
In particular, note that quoting must be used when using <strong>unalias</strong> to
remove global aliases:</p>
<blockquote>
<pre class="example">
% alias -g foo=bar
% unalias foo
unalias: no such hash table element: bar
% unalias \foo
%
</pre>
</blockquote>
<p>
When <strong>POSIX_ALIASES</strong> is set, only plain unquoted strings are eligible
for aliasing. The <strong>alias</strong> builtin does not reject ineligible aliases,
but they are not expanded.</p>
<p>
For use with completion, which would remove an initial backslash
followed by a character that isn&#39;t special, it may be more convenient to
quote the word by starting with a single quote, i.e. <strong>&#39;foo</strong>; completion
will automatically add the trailing single quote.</p>
<div id="outline-container-headline-10" class="outline-3">
<h3 id="headline-10">
Alias difficulties
</h3>
<div id="outline-text-headline-10" class="outline-text-3">
<p>Although aliases can be used in ways that bend normal shell syntax, not
every string of non-white-space characters can be used as an alias.</p>
<p>
Any set of characters not listed as a word above is not a word, hence no
attempt is made to expand it as an alias, no matter how it is defined
(i.e. via the builtin or the special parameter <strong>aliases</strong> described in
the section THE ZSH/PARAMETER MODULE in /zshmodules/(1)). However, as
noted in the case of <strong>POSIX_ALIASES</strong> above, the shell does not attempt
to deduce whether the string corresponds to a word at the time the alias
is created.</p>
<p>
For example, an expression containing an <strong>=</strong> at the start of a command
line is an assignment and cannot be expanded as an alias; a lone <strong>=</strong> is
not an assignment but can only be set as an alias using the parameter,
as otherwise the <strong>=</strong> is taken part of the syntax of the builtin command.</p>
<p>
It is not presently possible to alias the `*((*&#39; token that introduces
arithmetic expressions, because until a full statement has been parsed,
it cannot be distinguished from two consecutive `*(<strong>&#39; tokens introducing
nested subshells. Also, if a separator such as *&amp;&amp;</strong> is aliased, <strong>\&amp;&amp;</strong>
turns into the two tokens <strong>\&amp;</strong> and <strong>&amp;</strong>, each of which may have been
aliased separately. Similarly for <strong>\&lt;&lt;</strong>, <strong>\&gt;|</strong>, etc.</p>
<p>
There is a commonly encountered problem with aliases illustrated by the
following code:</p>
<blockquote>
<pre class="example">
alias echobar=&#39;echo bar&#39;; echobar
</pre>
</blockquote>
<p>
This prints a message that the command <strong>echobar</strong> could not be found.
This happens because aliases are expanded when the code is read in; the
entire line is read in one go, so that when <strong>echobar</strong> is executed it is
too late to expand the newly defined alias. This is often a problem in
shell scripts, functions, and code executed with `*source*&#39; or `*.*&#39;.
Consequently, use of functions rather than aliases is recommended in
non-interactive code.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-11" class="outline-2">
<h2 id="headline-11">
QUOTING
</h2>
<div id="outline-text-headline-11" class="outline-text-2">
<p>A character may be <em>quoted</em> (that is, made to stand for itself) by
preceding it with a `*\*&#39;. `*\*&#39; followed by a newline is ignored.</p>
<p>
A string enclosed between `*$&#39;<strong>&#39; and `</strong>&#39;<strong>&#39; is processed the same way as
the string arguments of the *print</strong> builtin, and the resulting string is
considered to be entirely quoted. A literal `*&#39;<strong>&#39; character can be
included in the string by using the `</strong>\&#39;*&#39; escape.</p>
<p>
All characters enclosed between a pair of single quotes (<strong>&#39;&#39;</strong>) that is
not preceded by a `*$*&#39; are quoted. A single quote cannot appear within
single quotes unless the option <strong>RC_QUOTES</strong> is set, in which case a pair
of single quotes are turned into a single quote. For example,</p>
<blockquote>
<pre class="example">
print &#39;&#39;&#39;&#39;
</pre>
</blockquote>
<p>
outputs nothing apart from a newline if <strong>RC_QUOTES</strong> is not set, but one
single quote if it is set.</p>
<p>
Inside double quotes (<strong>&#34;&#34;</strong>), parameter and command substitution occur,
and `*\*&#39; quotes the characters `*\*&#39;, `*`*&#39;, `*&#34;<strong>&#39;, `*$</strong>&#39;, and the
first character of <strong>$histchars</strong> (default `*!*&#39;).</p>
</div>
</div>
<div id="outline-container-headline-12" class="outline-2">
<h2 id="headline-12">
REDIRECTION
</h2>
<div id="outline-text-headline-12" class="outline-text-2">
<p>If a command is followed by <strong>&amp;</strong> and job control is not active, then the
default standard input for the command is the empty file <strong>/dev/null</strong>.
Otherwise, the environment for the execution of a command contains the
file descriptors of the invoking shell as modified by input/output
specifications.</p>
<p>
The following may appear anywhere in a simple command or may precede or
follow a complex command. Expansion occurs before <em>word</em> or <em>digit</em> is
used except as noted below. If the result of substitution on <em>word</em>
produces more than one filename, redirection occurs for each separate
filename in turn.</p>
<p>
<strong>&lt;</strong> <em>word</em> Open file <em>word</em> for reading as standard input. It is an
error to open a file in this fashion if it does not exist.</p>
<dl>
<dt>
<strong>&lt;&gt;</strong> <em>word</em>
</dt>
<dd>Open file <em>word</em> for reading and writing as standard
input. If the file does not exist then it is created.</dd>
<dt>
<strong>&gt;</strong> <em>word</em>
</dt>
<dd>Open file <em>word</em> for writing as standard output. If the
file does not exist then it is created. If the file exists, and the
<strong>CLOBBER</strong> option is unset, this causes an error; otherwise, it is
truncated to zero length.</dd>
</dl>
<p><strong>&gt;|</strong> <em>word</em></p>
<p>
<strong>&gt;!</strong> <em>word</em> Same as <strong>&gt;</strong>, except that the file is truncated to zero
length if it exists, regardless of <strong>CLOBBER</strong>.</p>
<dl>
<dt>
<strong>&gt;&gt;</strong> <em>word</em>
</dt>
<dd>Open file <em>word</em> for writing in append mode as standard
output. If the file does not exist, and the <strong>CLOBBER</strong> and
<strong>APPEND_CREATE</strong> options are both unset, this causes an error;
otherwise, the file is created.</dd>
</dl>
<p><strong>&gt;&gt;|</strong> <em>word</em></p>
<p>
<strong>&gt;&gt;!</strong> <em>word</em> Same as <strong>&gt;&gt;</strong>, except that the file is created if it does
not exist, regardless of <strong>CLOBBER</strong> and <strong>APPEND_CREATE</strong>.</p>
<dl>
<dt>
<strong>&lt;&lt;</strong>[*-*] <em>word</em>
</dt>
<dd>The shell input is read up to a line that is the
same as <em>word</em>, or to an end-of-file. No parameter expansion, command
substitution or filename generation is performed on <em>word</em>. The
resulting document, called a <em>here-document</em>, becomes the standard
input.

If any character of <em>word</em> is quoted with single or double quotes or a
`*\*&#39;, no interpretation is placed upon the characters of the
document. Otherwise, parameter and command substitution occurs, `*\*&#39;
followed by a newline is removed, and `*\*&#39; must be used to quote the
characters `*\*&#39;, `*$*&#39;, `*`*&#39; and the first character of <em>word</em>.

Note that <em>word</em> itself does not undergo shell expansion. Backquotes
in <em>word</em> do not have their usual effect; instead they behave
similarly to double quotes, except that the backquotes themselves are
passed through unchanged. (This information is given for completeness
and it is not recommended that backquotes be used.) Quotes in the form
<strong>$&#39;*/…/</strong>&#39;* have their standard effect of expanding backslashed
references to special characters.

If <strong>&lt;&lt;-</strong> is used, then all leading tabs are stripped from <em>word</em> and
from the document.</dd>
<dt>
<strong>&lt;&lt;&lt;</strong> <em>word</em>
</dt>
<dd>Perform shell expansion on <em>word</em> and pass the result
to standard input. This is known as a <em>here-string</em>. Compare the use
of <em>word</em> in here-documents above, where <em>word</em> does not undergo shell
expansion. The result will have a trailing newline after it.</dd>
</dl>
<p><strong>&lt;&amp;</strong> <em>number</em></p>
<p>
<strong>&gt;&amp;</strong> <em>number</em> The standard input/output is duplicated from file
descriptor <em>number</em> (see /dup2/(2)).</p>
<p>
<strong>&lt;&amp; -</strong></p>
<p>
<strong>&gt;&amp; -</strong> Close the standard input/output.</p>
<p>
<strong>&lt;&amp; p</strong></p>
<p>
<strong>&gt;&amp; p</strong> The input/output from/to the coprocess is moved to the standard
input/output.</p>
<p>
<strong>&gt;&amp;</strong> <em>word</em></p>
<p>
<strong>&amp;&gt;</strong> <em>word</em> (Except where `*&gt;&amp;* <em>word</em>&#39; matches one of the above
syntaxes; `*&amp;&gt;*&#39; can always be used to avoid this ambiguity.) Redirects
both standard output and standard error (file descriptor 2) in the
manner of `*&gt;* <em>word</em>&#39;. Note that this does <em>not</em> have the same effect
as `*&gt;* <em>word</em> <strong>2&gt;&amp;1</strong>&#39; in the presence of multios (see the section
below).</p>
<p>
<strong>&gt;&amp;|</strong> <em>word</em></p>
<p>
<strong>&gt;&amp;!</strong> <em>word</em></p>
<p>
<strong>&amp;&gt;|</strong> <em>word</em></p>
<p>
<strong>&amp;&gt;!</strong> <em>word</em> Redirects both standard output and standard error (file
descriptor 2) in the manner of `*&gt;|* <em>word</em>&#39;.</p>
<p>
<strong>&gt;&gt;&amp;</strong> <em>word</em></p>
<p>
<strong>&amp;&gt;&gt;</strong> <em>word</em> Redirects both standard output and standard error (file
descriptor 2) in the manner of `*&gt;&gt;* <em>word</em>&#39;.</p>
<p>
<strong>&gt;&gt;&amp;|</strong> <em>word</em></p>
<p>
<strong>&gt;&gt;&amp;!</strong> <em>word</em></p>
<p>
<strong>&amp;&gt;&gt;|</strong> <em>word</em></p>
<p>
<strong>&amp;&gt;&gt;!</strong> <em>word</em> Redirects both standard output and standard error (file
descriptor 2) in the manner of `*&gt;&gt;|* <em>word</em>&#39;.</p>
<p>
If one of the above is preceded by a digit, then the file descriptor
referred to is that specified by the digit instead of the default 0
or 1. The order in which redirections are specified is significant. The
shell evaluates each redirection in terms of the (<em>file descriptor</em>,
<em>file</em>) association at the time of evaluation. For example:</p>
<blockquote>
<pre class="example">
... 1&gt;fname 2&gt;&amp;1
</pre>
</blockquote>
<p>
first associates file descriptor 1 with file <em>fname</em>. It then associates
file descriptor 2 with the file associated with file descriptor 1 (that
is, <em>fname</em>). If the order of redirections were reversed, file
descriptor 2 would be associated with the terminal (assuming file
descriptor 1 had been) and then file descriptor 1 would be associated
with file <em>fname</em>.</p>
<p>
The `*|&amp;*&#39; command separator described in <em>Simple Commands &amp; Pipelines</em>
in /zshmisc/(1) is a shorthand for `*2&gt;&amp;1 |*&#39;.</p>
<p>
The various forms of process substitution, `*&lt;(<strong><em>list</em></strong>)*&#39;, and
`*=(<strong><em>list</em></strong>)*&#39; for input and `*&gt;(<strong><em>list</em></strong>)*&#39; for output, are often used
together with redirection. For example, if <em>word</em> in an output
redirection is of the form `*&gt;(<strong><em>list</em></strong>)*&#39; then the output is piped to
the command represented by <em>list</em>. See <em>Process Substitution</em> in
/zshexpn/(1).</p>
</div>
</div>
<div id="outline-container-headline-13" class="outline-2">
<h2 id="headline-13">
OPENING FILE DESCRIPTORS USING PARAMETERS
</h2>
<div id="outline-text-headline-13" class="outline-text-2">
<p>When the shell is parsing arguments to a command, and the shell option
<strong>IGNORE_BRACES</strong> is not set, a different form of redirection is allowed:
instead of a digit before the operator there is a valid shell identifier
enclosed in braces. The shell will open a new file descriptor that is
guaranteed to be at least 10 and set the parameter named by the
identifier to the file descriptor opened. No whitespace is allowed
between the closing brace and the redirection character. For example:</p>
<blockquote>
<pre class="example">
... {myfd}&gt;&amp;1
</pre>
</blockquote>
<p>
This opens a new file descriptor that is a duplicate of file descriptor
1 and sets the parameter <strong>myfd</strong> to the number of the file descriptor,
which will be at least 10. The new file descriptor can be written to
using the syntax <strong>&gt;&amp;$myfd</strong>. The file descriptor remains open in
subshells and forked external executables.</p>
<p>
The syntax <strong>{*/varid/</strong>}&gt;&amp;-<strong>, for example *{myfd}&gt;&amp;-</strong>, may be used to
close a file descriptor opened in this fashion. Note that the parameter
given by <em>varid</em> must previously be set to a file descriptor in this
case.</p>
<p>
It is an error to open or close a file descriptor in this fashion when
the parameter is readonly. However, it is not an error to read or write
a file descriptor using *&lt;&amp;$*/param/ or *&gt;&amp;$*/param/ if <em>param</em> is
readonly.</p>
<p>
If the option <strong>CLOBBER</strong> is unset, it is an error to open a file
descriptor using a parameter that is already set to an open file
descriptor previously allocated by this mechanism. Unsetting the
parameter before using it for allocating a file descriptor avoids the
error.</p>
<p>
Note that this mechanism merely allocates or closes a file descriptor;
it does not perform any redirections from or to it. It is usually
convenient to allocate a file descriptor prior to use as an argument to
<strong>exec</strong>. The syntax does not in any case work when used around complex
commands such as parenthesised subshells or loops, where the opening
brace is interpreted as part of a command list to be executed in the
current shell.</p>
<p>
The following shows a typical sequence of allocation, use, and closing
of a file descriptor:</p>
<blockquote>
<pre class="example">
integer myfd
exec {myfd}&gt;~/logs/mylogfile.txt
print This is a log message. &gt;&amp;$myfd
exec {myfd}&gt;&amp;-
</pre>
</blockquote>
<p>
Note that the expansion of the variable in the expression <strong>&gt;&amp;$myfd</strong>
occurs at the point the redirection is opened. This is after the
expansion of command arguments and after any redirections to the left on
the command line have been processed.</p>
</div>
</div>
<div id="outline-container-headline-14" class="outline-2">
<h2 id="headline-14">
MULTIOS
</h2>
<div id="outline-text-headline-14" class="outline-text-2">
<p>If the user tries to open a file descriptor for writing more than once,
the shell opens the file descriptor as a pipe to a process that copies
its input to all the specified outputs, similar to <strong>tee</strong>, provided the
<strong>MULTIOS</strong> option is set, as it is by default. Thus:</p>
<blockquote>
<pre class="example">
date &gt;foo &gt;bar
</pre>
</blockquote>
<p>
writes the date to two files, named `*foo*&#39; and `*bar*&#39;. Note that a
pipe is an implicit redirection; thus</p>
<blockquote>
<pre class="example">
date &gt;foo | cat
</pre>
</blockquote>
<p>
writes the date to the file `*foo*&#39;, and also pipes it to cat.</p>
<p>
Note that the shell opens all the files to be used in the multio process
immediately, not at the point they are about to be written.</p>
<p>
Note also that redirections are always expanded in order. This happens
regardless of the setting of the <strong>MULTIOS</strong> option, but with the option
in effect there are additional consequences. For example, the meaning of
the expression <strong>&gt;&amp;1</strong> will change after a previous redirection:</p>
<blockquote>
<pre class="example">
date &gt;&amp;1 &gt;output
</pre>
</blockquote>
<p>
In the case above, the <strong>&gt;&amp;1</strong> refers to the standard output at the start
of the line; the result is similar to the <strong>tee</strong> command. However,
consider:</p>
<blockquote>
<pre class="example">
date &gt;output &gt;&amp;1
</pre>
</blockquote>
<p>
As redirections are evaluated in order, when the <strong>&gt;&amp;1</strong> is encountered
the standard output is set to the file <strong>output</strong> and another copy of the
output is therefore sent to that file. This is unlikely to be what is
intended.</p>
<p>
If the <strong>MULTIOS</strong> option is set, the word after a redirection operator is
also subjected to filename generation (globbing). Thus</p>
<blockquote>
<pre class="example">
: &gt; *
</pre>
</blockquote>
<p>
will truncate all files in the current directory, assuming there&#39;s at
least one. (Without the <strong>MULTIOS</strong> option, it would create an empty file
called `***&#39;.) Similarly, you can do</p>
<blockquote>
<pre class="example">
echo exit 0 &gt;&gt; *.sh
</pre>
</blockquote>
<p>
If the user tries to open a file descriptor for reading more than once,
the shell opens the file descriptor as a pipe to a process that copies
all the specified inputs to its output in the order specified, provided
the <strong>MULTIOS</strong> option is set. It should be noted that each file is opened
immediately, not at the point where it is about to be read: this
behaviour differs from <strong>cat</strong>, so if strictly standard behaviour is
needed, <strong>cat</strong> should be used instead.</p>
<p>
Thus</p>
<blockquote>
<pre class="example">
sort &lt;foo &lt;fubar
</pre>
</blockquote>
<p>
or even</p>
<blockquote>
<pre class="example">
sort &lt;f{oo,ubar}
</pre>
</blockquote>
<p>
is equivalent to `*cat foo fubar | sort*&#39;.</p>
<p>
Expansion of the redirection argument occurs at the point the
redirection is opened, at the point described above for the expansion of
the variable in <strong>&gt;&amp;$myfd</strong>.</p>
<p>
Note that a pipe is an implicit redirection; thus</p>
<blockquote>
<pre class="example">
cat bar | sort &lt;foo
</pre>
</blockquote>
<p>
is equivalent to `*cat bar foo | sort*&#39; (note the order of the inputs).</p>
<p>
If the <strong>MULTIOS</strong> option is /un/set, each redirection replaces the
previous redirection for that file descriptor. However, all files
redirected to are actually opened, so</p>
<blockquote>
<pre class="example">
echo Hello &gt; bar &gt; baz
</pre>
</blockquote>
<p>
when <strong>MULTIOS</strong> is unset will truncate `*bar*&#39;, and write `*Hello*&#39; into
`*baz*&#39;.</p>
<p>
There is a problem when an output multio is attached to an external
program. A simple example shows this:</p>
<blockquote>
<pre class="example">
cat file &gt;file1 &gt;file2
cat file1 file2
</pre>
</blockquote>
<p>
Here, it is possible that the second `*cat*&#39; will not display the full
contents of <strong>file1</strong> and <strong>file2</strong> (i.e. the original contents of <strong>file</strong>
repeated twice).</p>
<p>
The reason for this is that the multios are spawned after the <strong>cat</strong>
process is forked from the parent shell, so the parent shell does not
wait for the multios to finish writing data. This means the command as
shown can exit before <strong>file1</strong> and <strong>file2</strong> are completely written. As a
workaround, it is possible to run the <strong>cat</strong> process as part of a job in
the current shell:</p>
<blockquote>
<pre class="example">
{ cat file } &gt;file &gt;file2
</pre>
</blockquote>
<p>
Here, the <strong>{*/…/</strong>}* job will pause to wait for both files to be
written.</p>
</div>
</div>
<div id="outline-container-headline-15" class="outline-2">
<h2 id="headline-15">
REDIRECTIONS WITH NO COMMAND
</h2>
<div id="outline-text-headline-15" class="outline-text-2">
<p>When a simple command consists of one or more redirection operators and
zero or more parameter assignments, but no command name, zsh can behave
in several ways.</p>
<p>
If the parameter <strong>NULLCMD</strong> is not set or the option <strong>CSH_NULLCMD</strong> is
set, an error is caused. This is the <strong>csh</strong> behavior and <strong>CSH_NULLCMD</strong> is
set by default when emulating <strong>csh</strong>.</p>
<p>
If the option <strong>SH_NULLCMD</strong> is set, the builtin `*:*&#39; is inserted as a
command with the given redirections. This is the default when emulating
<strong>sh</strong> or <strong>ksh</strong>.</p>
<p>
Otherwise, if the parameter <strong>NULLCMD</strong> is set, its value will be used as
a command with the given redirections. If both <strong>NULLCMD</strong> and
<strong>READNULLCMD</strong> are set, then the value of the latter will be used instead
of that of the former when the redirection is an input. The default for
<strong>NULLCMD</strong> is `*cat*&#39; and for <strong>READNULLCMD</strong> is `*more*&#39;. Thus</p>
<blockquote>
<pre class="example">
&lt; file
</pre>
</blockquote>
<p>
shows the contents of <strong>file</strong> on standard output, with paging if that is
a terminal. <strong>NULLCMD</strong> and <strong>READNULLCMD</strong> may refer to shell functions.</p>
</div>
</div>
<div id="outline-container-headline-16" class="outline-2">
<h2 id="headline-16">
COMMAND EXECUTION
</h2>
<div id="outline-text-headline-16" class="outline-text-2">
<p>If a command name contains no slashes, the shell attempts to locate it.
If there exists a shell function by that name, the function is invoked
as described in the section `Functions&#39;. If there exists a shell builtin
by that name, the builtin is invoked.</p>
<p>
Otherwise, the shell searches each element of <strong>$path</strong> for a directory
containing an executable file by that name.</p>
<p>
If execution fails: an error message is printed, and one of the
following values is returned.</p>
<dl>
<dt>
127
</dt>
<dd>The search was unsuccessful. The error message is `*command not
found:* <em>cmd</em>&#39;.</dd>
<dt>
126
</dt>
<dd>The executable file has insufficient permissions, is a
directory or special file, or is not a script and is in a format
unrecognized by the operating system. The exact conditions and error
message are operating system-dependent; see /execve/(2).</dd>
</dl>
<p>If execution fails because the file is not in executable format, and the
file is not a directory, it is assumed to be a shell script. <strong>/bin/sh</strong>
is spawned to execute it. If the program is a file beginning with
`*#!*&#39;, the remainder of the first line specifies an interpreter for the
program. The shell will execute the specified interpreter on operating
systems that do not handle this executable format in the kernel.</p>
<p>
If no external command is found but a function
<strong>command_not_found_handler</strong> exists the shell executes this function with
all command line arguments. The return status of the function becomes
the status of the command. Note that the handler is executed in a
subshell forked to execute an external command, hence changes to
directories, shell parameters, etc. have no effect on the main shell.</p>
</div>
</div>
<div id="outline-container-headline-17" class="outline-2">
<h2 id="headline-17">
FUNCTIONS
</h2>
<div id="outline-text-headline-17" class="outline-text-2">
<p>Shell functions are defined with the <strong>function</strong> reserved word or the
special syntax `/funcname/ <strong>()</strong>&#39;. Shell functions are read in and stored
internally. Alias names are resolved when the function is read.
Functions are executed like commands with the arguments passed as
positional parameters. (See the section `Command Execution&#39;.)</p>
<p>
Functions execute in the same process as the caller and share all files
and present working directory with the caller. A trap on <strong>EXIT</strong> set
inside a function is executed after the function completes in the
environment of the caller.</p>
<p>
The <strong>return</strong> builtin is used to return from function calls.</p>
<p>
Function identifiers can be listed with the <strong>functions</strong> builtin.
Functions can be undefined with the <strong>unfunction</strong> builtin.</p>
</div>
</div>
<div id="outline-container-headline-18" class="outline-2">
<h2 id="headline-18">
AUTOLOADING FUNCTIONS
</h2>
<div id="outline-text-headline-18" class="outline-text-2">
<p>A function can be marked as <em>undefined</em> using the <strong>autoload</strong> builtin (or
`*functions -u*&#39; or `*typeset -fu*&#39;). Such a function has no body. When
the function is first executed, the shell searches for its definition
using the elements of the <strong>fpath</strong> variable. Thus to define functions for
autoloading, a typical sequence is:</p>
<blockquote>
<pre class="example">
fpath=(~/myfuncs $fpath)
autoload myfunc1 myfunc2 ...
</pre>
</blockquote>
<p>
The usual alias expansion during reading will be suppressed if the
<strong>autoload</strong> builtin or its equivalent is given the option <strong>-U</strong>. This is
recommended for the use of functions supplied with the zsh distribution.
Note that for functions precompiled with the <strong>zcompile</strong> builtin command
the flag <strong>-U</strong> must be provided when the <strong>.zwc</strong> file is created, as the
corresponding information is compiled into the latter.</p>
<p>
For each <em>element</em> in <strong>fpath</strong>, the shell looks for three possible files,
the newest of which is used to load the definition for the function:</p>
<p>
/element/*.zwc* A file created with the <strong>zcompile</strong> builtin command,
which is expected to contain the definitions for all functions in the
directory named <em>element</em>. The file is treated in the same manner as a
directory containing files for functions and is searched for the
definition of the function. If the definition is not found, the search
for a definition proceeds with the other two possibilities described
below.</p>
<blockquote>
<p>If <em>element</em> already includes a <strong>.zwc</strong> extension (i.e. the extension was
explicitly given by the user), <em>element</em> is searched for the definition
of the function without comparing its age to that of other files; in
fact, there does not need to be any directory named <em>element</em> without
the suffix. Thus including an element such as `*/usr/local/funcs.zwc*&#39;
in <strong>fpath</strong> will speed up the search for functions, with the disadvantage
that functions included must be explicitly recompiled by hand before the
shell notices any changes.</p>
</blockquote>
<dl>
<dt>
/element/*/*/function/*.zwc*
</dt>
<dd>A file created with <strong>zcompile</strong>, which
is expected to contain the definition for <em>function</em>. It may include
other function definitions as well, but those are neither loaded nor
executed; a file found in this way is searched <em>only</em> for the
definition of <em>function</em>.</dd>
<dt>
<em>element/*/*/function</em>
</dt>
<dd>A file of zsh command text, taken to be the
definition for <em>function</em>.</dd>
</dl>
<p>In summary, the order of searching is, first, in the <em>parents of</em>
directories in <strong>fpath</strong> for the newer of either a compiled directory or a
directory in <strong>fpath</strong>; second, if more than one of these contains a
definition for the function that is sought, the leftmost in the <strong>fpath</strong>
is chosen; and third, within a directory, the newer of either a compiled
function or an ordinary function definition is used.</p>
<p>
If the <strong>KSH_AUTOLOAD</strong> option is set, or the file contains only a simple
definition of the function, the file&#39;s contents will be executed. This
will normally define the function in question, but may also perform
initialization, which is executed in the context of the function
execution, and may therefore define local parameters. It is an error if
the function is not defined by loading the file.</p>
<p>
Otherwise, the function body (with no surrounding `/funcname/*()*
{/…/*}*&#39;) is taken to be the complete contents of the file. This form
allows the file to be used directly as an executable shell script. If
processing of the file results in the function being re-defined, the
function itself is not re-executed. To force the shell to perform
initialization and then call the function defined, the file should
contain initialization code (which will be executed then discarded) in
addition to a complete function definition (which will be retained for
subsequent calls to the function), and a call to the shell function,
including any arguments, at the end.</p>
<p>
For example, suppose the autoload file <strong>func</strong> contains</p>
<blockquote>
<pre class="example">
func() { print This is func; }
print func is initialized
</pre>
</blockquote>
<p>
then `*func; func*&#39; with <strong>KSH_AUTOLOAD</strong> set will produce both messages
on the first call, but only the message `*This is func*&#39; on the second
and subsequent calls. Without <strong>KSH_AUTOLOAD</strong> set, it will produce the
initialization message on the first call, and the other message on the
second and subsequent calls.</p>
<p>
It is also possible to create a function that is not marked as
autoloaded, but which loads its own definition by searching <strong>fpath</strong>, by
using `*autoload -X*&#39; within a shell function. For example, the
following are equivalent:</p>
<blockquote>
<pre class="example">
myfunc() {
  autoload -X
}
myfunc args...
</pre>
</blockquote>
<p>
and</p>
<blockquote>
<pre class="example">
unfunction myfunc   # if myfunc was defined
autoload myfunc
myfunc args...
</pre>
</blockquote>
<p>
In fact, the <strong>functions</strong> command outputs `*builtin autoload -X*&#39; as the
body of an autoloaded function. This is done so that</p>
<blockquote>
<pre class="example">
eval &#34;$(functions)&#34;
</pre>
</blockquote>
<p>
produces a reasonable result. A true autoloaded function can be
identified by the presence of the comment `*# undefined*&#39; in the body,
because all comments are discarded from defined functions.</p>
<p>
To load the definition of an autoloaded function <strong>myfunc</strong> without
executing <strong>myfunc</strong>, use:</p>
<blockquote>
<pre class="example">
autoload +X myfunc
</pre>
</blockquote>
</div>
</div>
<div id="outline-container-headline-19" class="outline-2">
<h2 id="headline-19">
ANONYMOUS FUNCTIONS
</h2>
<div id="outline-text-headline-19" class="outline-text-2">
<p>If no name is given for a function, it is `anonymous&#39; and is handled
specially. Either form of function definition may be used: a `*()*&#39; with
no preceding name, or a `*function*&#39; with an immediately following open
brace. The function is executed immediately at the point of definition
and is not stored for future use. The function name is set to
`*(anon)*&#39;.</p>
<p>
Arguments to the function may be specified as words following the
closing brace defining the function, hence if there are none no
arguments (other than <strong>$0</strong>) are set. This is a difference from the way
other functions are parsed: normal function definitions may be followed
by certain keywords such as `*else*&#39; or `*fi*&#39;, which will be treated as
arguments to anonymous functions, so that a newline or semicolon is
needed to force keyword interpretation.</p>
<p>
Note also that the argument list of any enclosing script or function is
hidden (as would be the case for any other function called at this
point).</p>
<p>
Redirections may be applied to the anonymous function in the same manner
as to a current-shell structure enclosed in braces. The main use of
anonymous functions is to provide a scope for local variables. This is
particularly convenient in start-up files as these do not provide their
own local variable scope.</p>
<p>
For example,</p>
<blockquote>
<pre class="example">
variable=outside
function {
  local variable=inside
  print &#34;I am $variable with arguments $*&#34;
} this and that
print &#34;I am $variable&#34;
</pre>
</blockquote>
<p>
outputs the following:</p>
<blockquote>
<pre class="example">
I am inside with arguments this and that
I am outside
</pre>
</blockquote>
<p>
Note that function definitions with arguments that expand to nothing,
for example `*name=; function $name { <strong><em>…</em></strong> }*&#39;, are not treated as
anonymous functions. Instead, they are treated as normal function
definitions where the definition is silently discarded.</p>
</div>
</div>
<div id="outline-container-headline-20" class="outline-2">
<h2 id="headline-20">
SPECIAL FUNCTIONS
</h2>
<div id="outline-text-headline-20" class="outline-text-2">
<p>Certain functions, if defined, have special meaning to the shell.</p>
<div id="outline-container-headline-21" class="outline-3">
<h3 id="headline-21">
Hook Functions
</h3>
<div id="outline-text-headline-21" class="outline-text-3">
<p>For the functions below, it is possible to define an array that has the
same name as the function with `*_functions*&#39; appended. Any element in
such an array is taken as the name of a function to execute; it is
executed in the same context and with the same arguments and same
initial value of <strong>$?</strong> as the basic function. For example, if
<strong>$chpwd_functions</strong> is an array containing the values `*mychpwd*&#39;,
`*chpwd_save_dirstack*&#39;, then the shell attempts to execute the
functions `*chpwd*&#39;, `*mychpwd*&#39; and `*chpwd_save_dirstack*&#39;, in that
order. Any function that does not exist is silently ignored. A function
found by this mechanism is referred to elsewhere as a <em>hook function</em>.
An error in any function causes subsequent functions not to be run. Note
further that an error in a <strong>precmd</strong> hook causes an immediately following
<strong>periodic</strong> function not to run (though it may run at the next
opportunity).</p>
<p>
<strong>chpwd</strong> Executed whenever the current working directory is changed.</p>
<dl>
<dt>
<strong>periodic</strong>
</dt>
<dd>If the parameter <strong>PERIOD</strong> is set, this function is
executed every <strong>$PERIOD</strong> seconds, just before a prompt. Note that if
multiple functions are defined using the array <strong>periodic_functions</strong>
only one period is applied to the complete set of functions, and the
scheduled time is not reset if the list of functions is altered. Hence
the set of functions is always called together.</dd>
<dt>
<strong>precmd</strong>
</dt>
<dd>Executed before each prompt. Note that precommand
functions are not re-executed simply because the command line is
redrawn, as happens, for example, when a notification about an exiting
job is displayed.</dd>
<dt>
<strong>preexec</strong>
</dt>
<dd>Executed just after a command has been read and is about
to be executed. If the history mechanism is active (regardless of
whether the line was discarded from the history buffer), the string
that the user typed is passed as the first argument, otherwise it is
an empty string. The actual command that will be executed (including
expanded aliases) is passed in two different forms: the second
argument is a single-line, size-limited version of the command (with
things like function bodies elided); the third argument contains the
full text that is being executed.</dd>
<dt>
<strong>zshaddhistory</strong>
</dt>
<dd>
<p>Executed when a history line has been read
interactively, but before it is executed. The sole argument is the
complete history line (so that any terminating newline will still be
present).</p>
<p>
If any of the hook functions returns status 1 (or any non-zero value
other than 2, though this is not guaranteed for future versions of the
shell) the history line will not be saved, although it lingers in the
history until the next line is executed, allowing you to reuse or edit
it immediately.</p>
<p>
If any of the hook functions returns status 2 the history line will be
saved on the internal history list, but not written to the history
file. In case of a conflict, the first non-zero status value is taken.</p>
<p>
A hook function may call `*fc -p* <em>…</em>&#39; to switch the history context
so that the history is saved in a different file from that in the
global <strong>HISTFILE</strong> parameter. This is handled specially: the history
context is automatically restored after the processing of the history
line is finished.</p>
<p>
The following example function works with one of the options
<strong>INC_APPEND_HISTORY</strong> or <strong>SHARE_HISTORY</strong> set, in order that the line is
written out immediately after the history entry is added. It first
adds the history line to the normal history with the newline stripped,
which is usually the correct behaviour. Then it switches the history
context so that the line will be written to a history file in the
current directory.</p>
<blockquote>
<pre class="example">
zshaddhistory() {
  print -sr -- ${1%%$&#39;\n&#39;}
  fc -p .zsh_local_history
}
</pre>
</blockquote>
</dd>
<dt>
<strong>zshexit</strong>
</dt>
<dd>Executed at the point where the main shell is about to
exit normally. This is not called by exiting subshells, nor when the
<strong>exec</strong> precommand modifier is used before an external command. Also,
unlike <strong>TRAPEXIT</strong>, it is not called when functions exit.</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-22" class="outline-3">
<h3 id="headline-22">
Trap Functions
</h3>
<div id="outline-text-headline-22" class="outline-text-3">
<p>The functions below are treated specially but do not have corresponding
hook arrays.</p>
<p>
*TRAP*/NAL/ If defined and non-null, this function will be executed
whenever the shell catches a signal <strong>SIG*/NAL/, where <em>NAL</em> is a signal
name as specified for the *kill</strong> builtin. The signal number will be
passed as the first parameter to the function.</p>
<blockquote>
<p>If a function of this form is defined and null, the shell and processes
spawned by it will ignore *SIG*/NAL/.</p>
<p>
The return status from the function is handled specially. If it is zero,
the signal is assumed to have been handled, and execution continues
normally. Otherwise, the shell will behave as interrupted except that
the return status of the trap is retained.</p>
<p>
Programs terminated by uncaught signals typically return the status 128
plus the signal number. Hence the following causes the handler for
<strong>SIGINT</strong> to print a message, then mimic the usual effect of the signal.</p>
<blockquote>
<pre class="example">
TRAPINT() {
  print &#34;Caught SIGINT, aborting.&#34;
  return $(( 128 + $1 ))
}
</pre>
</blockquote>
<p>
The functions <strong>TRAPZERR</strong>, <strong>TRAPDEBUG</strong> and <strong>TRAPEXIT</strong> are never executed
inside other traps.</p>
</blockquote>
<dl>
<dt>
<strong>TRAPDEBUG</strong>
</dt>
<dd>If the option <strong>DEBUG_BEFORE_CMD</strong> is set (as it is by
default), executed before each command; otherwise executed after each
command. See the description of the <strong>trap</strong> builtin in /zshbuiltins/(1)
for details of additional features provided in debug traps.</dd>
<dt>
<strong>TRAPEXIT</strong>
</dt>
<dd>Executed when the shell exits, or when the current
function exits if defined inside a function. The value of <strong>$?</strong> at the
start of execution is the exit status of the shell or the return
status of the function exiting.</dd>
<dt>
<strong>TRAPZERR</strong>
</dt>
<dd>Executed whenever a command has a non-zero exit status.
However, the function is not executed if the command occurred in a
sublist followed by `*&amp;&amp;*&#39; or `*||*&#39;; only the final command in a
sublist of this type causes the trap to be executed. The function
<strong>TRAPERR</strong> acts the same as <strong>TRAPZERR</strong> on systems where there is no
<strong>SIGERR</strong> (this is the usual case).</dd>
</dl>
<p>The functions beginning `*TRAP*&#39; may alternatively be defined with the
<strong>trap</strong> builtin: this may be preferable for some uses. Setting a trap
with one form removes any trap of the other form for the same signal;
removing a trap in either form removes all traps for the same signal.
The forms</p>
<blockquote>
<pre class="example">
TRAPNAL() { 
 # code
}
</pre>
</blockquote>
<p>
(&#39;function traps&#39;) and</p>
<blockquote>
<pre class="example">
trap &#39;
 # code
&#39; NAL
</pre>
</blockquote>
<p>
(&#39;list traps&#39;) are equivalent in most ways, the exceptions being the
following:</p>
<p>
· Function traps have all the properties of normal functions, appearing
in the list of functions and being called with their own function
context rather than the context where the trap was triggered.</p>
<dl>
<dt>
·
</dt>
<dd>The return status from function traps is special, whereas a
return from a list trap causes the surrounding context to return with
the given status.</dd>
<dt>
·
</dt>
<dd>Function traps are not reset within subshells, in accordance with
zsh behaviour; list traps are reset, in accordance with POSIX
behaviour.</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-23" class="outline-2">
<h2 id="headline-23">
JOBS
</h2>
<div id="outline-text-headline-23" class="outline-text-2">
<p>If the <strong>MONITOR</strong> option is set, an interactive shell associates a <em>job</em>
with each pipeline. It keeps a table of current jobs, printed by the
<strong>jobs</strong> command, and assigns them small integer numbers. When a job is
started asynchronously with `*&amp;*&#39;, the shell prints a line to standard
error which looks like:</p>
<blockquote>
<pre class="example">
[1] 1234
</pre>
</blockquote>
<p>
indicating that the job which was started asynchronously was job number
1 and had one (top-level) process, whose process ID was 1234.</p>
<p>
If a job is started with `*&amp;|*&#39; or `*&amp;!*&#39;, then that job is immediately
disowned. After startup, it does not have a place in the job table, and
is not subject to the job control features described here.</p>
<p>
If you are running a job and wish to do something else you may hit the
key ^Z (control-Z) which sends a <strong>TSTP</strong> signal to the current job: this
key may be redefined by the <strong>susp</strong> option of the external <strong>stty</strong>
command. The shell will then normally indicate that the job has been
`suspended&#39;, and print another prompt. You can then manipulate the state
of this job, putting it in the background with the <strong>bg</strong> command, or run
some other commands and then eventually bring the job back into the
foreground with the foreground command <strong>fg</strong>. A ^Z takes effect
immediately and is like an interrupt in that pending output and unread
input are discarded when it is typed.</p>
<p>
A job being run in the background will suspend if it tries to read from
the terminal.</p>
<p>
Note that if the job running in the foreground is a shell function, then
suspending it will have the effect of causing the shell to fork. This is
necessary to separate the function&#39;s state from that of the parent shell
performing the job control, so that the latter can return to the command
line prompt. As a result, even if <strong>fg</strong> is used to continue the job the
function will no longer be part of the parent shell, and any variables
set by the function will not be visible in the parent shell. Thus the
behaviour is different from the case where the function was never
suspended. Zsh is different from many other shells in this regard.</p>
<p>
One additional side effect is that use of <strong>disown</strong> with a job created by
suspending shell code in this fashion is delayed: the job can only be
disowned once any process started from the parent shell has terminated.
At that point, the disowned job disappears silently from the job list.</p>
<p>
The same behaviour is found when the shell is executing code as the
right hand side of a pipeline or any complex shell construct such as
<strong>if</strong>, <strong>for</strong>, etc., in order that the entire block of code can be managed
as a single job. Background jobs are normally allowed to produce output,
but this can be disabled by giving the command `*stty tostop*&#39;. If you
set this tty option, then background jobs will suspend when they try to
produce output like they do when they try to read input.</p>
<p>
When a command is suspended and continued later with the <strong>fg</strong> or <strong>wait</strong>
builtins, zsh restores tty modes that were in effect when it was
suspended. This (intentionally) does not apply if the command is
continued via `*kill -CONT*&#39;, nor when it is continued with <strong>bg</strong>.</p>
<p>
There are several ways to refer to jobs in the shell. A job can be
referred to by the process ID of any process of the job or by one of the
following:</p>
<dl>
<dt>
*%*/number/
</dt>
<dd>The job with the given number.</dd>
<dt>
*%*/string/
</dt>
<dd>The last job whose command line begins with <em>string</em>.</dd>
<dt>
*%?*/string/
</dt>
<dd>The last job whose command line contains <em>string</em>.</dd>
<dt>
<strong>%%</strong>
</dt>
<dd>Current job.</dd>
<dt>
<strong>%+</strong>
</dt>
<dd>Equivalent to `*%%*&#39;.</dd>
<dt>
<strong>%-</strong>
</dt>
<dd>Previous job.</dd>
</dl>
<p>The shell learns immediately whenever a process changes state. It
normally informs you whenever a job becomes blocked so that no further
progress is possible. If the <strong>NOTIFY</strong> option is not set, it waits until
just before it prints a prompt before it informs you. All such
notifications are sent directly to the terminal, not to the standard
output or standard error.</p>
<p>
When the monitor mode is on, each background job that completes triggers
any trap set for <strong>CHLD</strong>.</p>
<p>
When you try to leave the shell while jobs are running or suspended, you
will be warned that `You have suspended (running) jobs&#39;. You may use the
<strong>jobs</strong> command to see what they are. If you do this or immediately try
to exit again, the shell will not warn you a second time; the suspended
jobs will be terminated, and the running jobs will be sent a <strong>SIGHUP</strong>
signal, if the <strong>HUP</strong> option is set.</p>
<p>
To avoid having the shell terminate the running jobs, either use the
/nohup/(1) command or the <strong>disown</strong> builtin.</p>
</div>
</div>
<div id="outline-container-headline-24" class="outline-2">
<h2 id="headline-24">
SIGNALS
</h2>
<div id="outline-text-headline-24" class="outline-text-2">
<p>The <strong>INT</strong> and <strong>QUIT</strong> signals for an invoked command are ignored if the
command is followed by `*&amp;*&#39; and the <strong>MONITOR</strong> option is not active. The
shell itself always ignores the <strong>QUIT</strong> signal. Otherwise, signals have
the values inherited by the shell from its parent (but see the
*TRAP*/NAL/ special functions in the section `Functions&#39;).</p>
<p>
Certain jobs are run asynchronously by the shell other than those
explicitly put into the background; even in cases where the shell would
usually wait for such jobs, an explicit <strong>exit</strong> command or exit due to
the option <strong>ERR_EXIT</strong> will cause the shell to exit without waiting.
Examples of such asynchronous jobs are process substitution, see the
section PROCESS SUBSTITUTION in the /zshexpn/(1) manual page, and the
handler processes for multios, see the section MULTIOS in the
/zshmisc/(1) manual page.</p>
</div>
</div>
<div id="outline-container-headline-25" class="outline-2">
<h2 id="headline-25">
ARITHMETIC EVALUATION
</h2>
<div id="outline-text-headline-25" class="outline-text-2">
<p>The shell can perform integer and floating point arithmetic, either
using the builtin <strong>let</strong>, or via a substitution of the form
<strong>$((*/…/</strong>))*. For integers, the shell is usually compiled to use
8-byte precision where this is available, otherwise precision is 4
bytes. This can be tested, for example, by giving the command `*print -
$(( 12345678901 ))*&#39;; if the number appears unchanged, the precision is
at least 8 bytes. Floating point arithmetic always uses the `double&#39;
type with whatever corresponding precision is provided by the compiler
and the library.</p>
<p>
The <strong>let</strong> builtin command takes arithmetic expressions as arguments;
each is evaluated separately. Since many of the arithmetic operators, as
well as spaces, require quoting, an alternative form is provided: for
any command which begins with a `*((<strong>&#39;, all the characters until a
matching `</strong>))*&#39; are treated as a double-quoted expression and arithmetic
expansion performed as for an argument of <strong>let</strong>. More precisely,
`*((<strong><em>…</em></strong>))*&#39; is equivalent to `*let &#34;<strong><em>…</em></strong>&#34;*&#39;. The return status is
0 if the arithmetic value of the expression is non-zero, 1 if it is
zero, and 2 if an error occurred.</p>
<p>
For example, the following statement</p>
<blockquote>
<pre class="example">
(( val = 2 + 1 ))
</pre>
</blockquote>
<p>
is equivalent to</p>
<blockquote>
<pre class="example">
let &#34;val = 2 + 1&#34;
</pre>
</blockquote>
<p>
both assigning the value 3 to the shell variable <strong>val</strong> and returning a
zero status.</p>
<p>
Integers can be in bases other than 10. A leading `*0x*&#39; or `*0X*&#39;
denotes hexadecimal and a leading `*0b*&#39; or `*0B*&#39; binary. Integers may
also be of the form `/base/*#*/n/&#39;, where <em>base</em> is a decimal number
between two and thirty-six representing the arithmetic base and <em>n</em> is a
number in that base (for example, `*16#ff*&#39; is 255 in hexadecimal). The
<em>base/*#* may also be omitted, in which case base 10 is used. For
backwards compatibility the form `*[*/base/*]*/n</em>&#39; is also accepted.</p>
<p>
An integer expression or a base given in the form `/base/*#*/n/&#39; may
contain underscores (`*_*&#39;) after the leading digit for visual guidance;
these are ignored in computation. Examples are <strong>1_000_000</strong> or
<strong>0xffff_ffff</strong> which are equivalent to <strong>1000000</strong> and <strong>0xffffffff</strong>
respectively.</p>
<p>
It is also possible to specify a base to be used for output in the form
`*[#*/base/*]*&#39;, for example `*[#16]*&#39;. This is used when outputting
arithmetical substitutions or when assigning to scalar parameters, but
an explicitly defined integer or floating point parameter will not be
affected. If an integer variable is implicitly defined by an arithmetic
expression, any base specified in this way will be set as the variable&#39;s
output arithmetic base as if the option `*-i* <em>base</em>&#39; to the <strong>typeset</strong>
builtin had been used. The expression has no precedence and if it occurs
more than once in a mathematical expression, the last encountered is
used. For clarity it is recommended that it appear at the beginning of
an expression. As an example:</p>
<blockquote>
<pre class="example">
typeset -i 16 y
print $(( [#8] x = 32, y = 32 ))
print $x $y
</pre>
</blockquote>
<p>
outputs first `*8#40*&#39;, the rightmost value in the given output base,
and then `*8#40 16#20*&#39;, because <strong>y</strong> has been explicitly declared to
have output base 16, while <strong>x</strong> (assuming it does not already exist) is
implicitly typed by the arithmetic evaluation, where it acquires the
output base 8.</p>
<p>
The <em>base</em> may be replaced or followed by an underscore, which may
itself be followed by a positive integer (if it is missing the value 3
is used). This indicates that underscores should be inserted into the
output string, grouping the number for visual clarity. The following
integer specifies the number of digits to group together. For example:</p>
<blockquote>
<pre class="example">
setopt cbases
print $(( [#16_4] 65536 ** 2 ))
</pre>
</blockquote>
<p>
outputs `*0x1_0000_0000*&#39;.</p>
<p>
The feature can be used with floating point numbers, in which case the
base must be omitted; grouping is away from the decimal point. For
example,</p>
<blockquote>
<pre class="example">
zmodload zsh/mathfunc
print $(( [#_] sqrt(1e7) ))
</pre>
</blockquote>
<p>
outputs `*3_162.277_660_168_379_5*&#39; (the number of decimal places shown
may vary).</p>
<p>
If the <strong>C_BASES</strong> option is set, hexadecimal numbers are output in the
standard C format, for example `*0xFF*&#39; instead of the usual `*16#FF*&#39;.
If the option <strong>OCTAL_ZEROES</strong> is also set (it is not by default), octal
numbers will be treated similarly and hence appear as `*077*&#39; instead of
`*8#77*&#39;. This option has no effect on the output of bases other than
hexadecimal and octal, and these formats are always understood on input.</p>
<p>
When an output base is specified using the `*[#*/base/*]*&#39; syntax, an
appropriate base prefix will be output if necessary, so that the value
output is valid syntax for input. If the <strong>#</strong> is doubled, for example
`*[##16]*&#39;, then no base prefix is output.</p>
<p>
Floating point constants are recognized by the presence of a decimal
point or an exponent. The decimal point may be the first character of
the constant, but the exponent character <strong>e</strong> or <strong>E</strong> may not, as it will
be taken for a parameter name. All numeric parts (before and after the
decimal point and in the exponent) may contain underscores after the
leading digit for visual guidance; these are ignored in computation.</p>
<p>
An arithmetic expression uses nearly the same syntax and associativity
of expressions as in C.</p>
<p>
In the native mode of operation, the following operators are supported
(listed in decreasing order of precedence):</p>
<dl>
<dt>
<strong>+ - ! ~ ++ –</strong>
</dt>
<dd>unary plus/minus, logical NOT, complement,
{pre,post}{in,de}crement</dd>
<dt>
<strong>&lt;&lt; &gt;&gt;</strong>
</dt>
<dd>bitwise shift left, right</dd>
<dt>
<strong>&amp;</strong>
</dt>
<dd>bitwise AND</dd>
<dt>
<strong>^</strong>
</dt>
<dd>bitwise XOR</dd>
<dt>
<strong>|</strong>
</dt>
<dd>bitwise OR</dd>
<dt>
<strong>**</strong>
</dt>
<dd>exponentiation</dd>
<dt>
<strong>* / %</strong>
</dt>
<dd>multiplication, division, modulus (remainder)</dd>
<dt>
<strong>+ -</strong>
</dt>
<dd>addition, subtraction</dd>
<dt>
<strong>&lt; &gt; &lt;= &gt;=</strong>
</dt>
<dd>comparison</dd>
<dt>
<strong><code class="verbatim">= !</code></strong>
</dt>
<dd>equality and inequality</dd>
<dt>
<strong>&amp;&amp;</strong>
</dt>
<dd>logical AND</dd>
<dt>
<strong>|| ^^</strong>
</dt>
<dd>logical OR, XOR</dd>
<dt>
<strong>? :</strong>
</dt>
<dd>ternary operator</dd>
<dt>
<strong>= += -= *= /= %= &amp;= ^= |= &lt;&lt;= &gt;&gt;= &amp;&amp;= ||= ^^= **=</strong>
</dt>
<dd>assignment</dd>
<dt>
<strong>,</strong>
</dt>
<dd>comma operator</dd>
</dl>
<p>The operators `*&amp;&amp;*&#39;, `*||*&#39;, `*&amp;&amp;=*&#39;, and `*||=*&#39; are short-circuiting,
and only one of the latter two expressions in a ternary operator is
evaluated. Note the precedence of the bitwise AND, OR, and XOR
operators.</p>
<p>
With the option <strong>C_PRECEDENCES</strong> the precedences (but no other
properties) of the operators are altered to be the same as those in most
other languages that support the relevant operators:</p>
<dl>
<dt>
<strong>+ - ! ~ ++ –</strong>
</dt>
<dd>unary plus/minus, logical NOT, complement,
{pre,post}{in,de}crement</dd>
<dt>
<strong>**</strong>
</dt>
<dd>exponentiation</dd>
<dt>
<strong>* / %</strong>
</dt>
<dd>multiplication, division, modulus (remainder)</dd>
<dt>
<strong>+ -</strong>
</dt>
<dd>addition, subtraction</dd>
<dt>
<strong>&lt;&lt; &gt;&gt;</strong>
</dt>
<dd>bitwise shift left, right</dd>
<dt>
<strong>&lt; &gt; &lt;= &gt;=</strong>
</dt>
<dd>comparison</dd>
<dt>
<strong><code class="verbatim">= !</code></strong>
</dt>
<dd>equality and inequality</dd>
<dt>
<strong>&amp;</strong>
</dt>
<dd>bitwise AND</dd>
<dt>
<strong>^</strong>
</dt>
<dd>bitwise XOR</dd>
<dt>
<strong>|</strong>
</dt>
<dd>bitwise OR</dd>
<dt>
<strong>&amp;&amp;</strong>
</dt>
<dd>logical AND</dd>
<dt>
<strong>^^</strong>
</dt>
<dd>logical XOR</dd>
<dt>
<strong>||</strong>
</dt>
<dd>logical OR</dd>
<dt>
<strong>? :</strong>
</dt>
<dd>ternary operator</dd>
<dt>
<strong>= += -= *= /= %= &amp;= ^= |= &lt;&lt;= &gt;&gt;= &amp;&amp;= ||= ^^= **=</strong>
</dt>
<dd>assignment</dd>
<dt>
<strong>,</strong>
</dt>
<dd>comma operator</dd>
</dl>
<p>Note the precedence of exponentiation in both cases is below that of
unary operators, hence `*-3**2*&#39; evaluates as `*9*&#39;, not `*-9*&#39;. Use
parentheses where necessary: `*-(3**2)*&#39;. This is for compatibility with
other shells.</p>
<p>
Mathematical functions can be called with the syntax
`/func/*(<strong><em>args</em></strong>)*&#39;, where the function decides if the <em>args</em> is used
as a string or a comma-separated list of arithmetic expressions. The
shell currently defines no mathematical functions by default, but the
module <strong>zsh/mathfunc</strong> may be loaded with the <strong>zmodload</strong> builtin to
provide standard floating point mathematical functions.</p>
<p>
An expression of the form `*##*/x/&#39; where <em>x</em> is any character sequence
such as `*a*&#39;, `*^A*&#39;, or `*\M-\C-x*&#39; gives the value of this character
and an expression of the form `*#*/name/&#39; gives the value of the first
character of the contents of the parameter <em>name</em>. Character values are
according to the character set used in the current locale; for multibyte
character handling the option <strong>MULTIBYTE</strong> must be set. Note that this
form is different from `*$#*/name/&#39;, a standard parameter substitution
which gives the length of the parameter <em>name</em>. `*#\*&#39; is accepted
instead of `*##*&#39;, but its use is deprecated.</p>
<p>
Named parameters and subscripted arrays can be referenced by name within
an arithmetic expression without using the parameter expansion syntax.
For example,</p>
<blockquote>
<pre class="example">
((val2 = val1 * 2))
</pre>
</blockquote>
<p>
assigns twice the value of <strong>$val1</strong> to the parameter named <strong>val2</strong>.</p>
<p>
An internal integer representation of a named parameter can be specified
with the <strong>integer</strong> builtin. Arithmetic evaluation is performed on the
value of each assignment to a named parameter declared integer in this
manner. Assigning a floating point number to an integer results in
rounding towards zero.</p>
<p>
Likewise, floating point numbers can be declared with the <strong>float</strong>
builtin; there are two types, differing only in their output format, as
described for the <strong>typeset</strong> builtin. The output format can be bypassed
by using arithmetic substitution instead of the parameter substitution,
i.e. `*${*/float/*}*&#39; uses the defined format, but `*$((<strong><em>float</em></strong>))*&#39;
uses a generic floating point format.</p>
<p>
Promotion of integer to floating point values is performed where
necessary. In addition, if any operator which requires an integer
(`*&amp;*&#39;, `*|*&#39;, `*^*&#39;, `*&lt;&lt;*&#39;, `*&gt;&gt;*&#39; and their equivalents with
assignment) is given a floating point argument, it will be silently
rounded towards zero except for `*~*&#39; which rounds down.</p>
<p>
Users should beware that, in common with many other programming
languages but not software designed for calculation, the evaluation of
an expression in zsh is taken a term at a time and promotion of integers
to floating point does not occur in terms only containing integers. A
typical result of this is that a division such as <strong>6/8</strong> is truncated, in
this being rounded towards 0. The <strong>FORCE_FLOAT</strong> shell option can be used
in scripts or functions where floating point evaluation is required
throughout.</p>
<p>
Scalar variables can hold integer or floating point values at different
times; there is no memory of the numeric type in this case.</p>
<p>
If a variable is first assigned in a numeric context without previously
being declared, it will be implicitly typed as <strong>integer</strong> or <strong>float</strong> and
retain that type either until the type is explicitly changed or until
the end of the scope. This can have unforeseen consequences. For
example, in the loop</p>
<blockquote>
<pre class="example">
for (( f = 0; f &lt; 1; f += 0.1 )); do
# use $f
done
</pre>
</blockquote>
<p>
if <strong>f</strong> has not already been declared, the first assignment will cause it
to be created as an integer, and consequently the operation `*f += 0.1*&#39;
will always cause the result to be truncated to zero, so that the loop
will fail. A simple fix would be to turn the initialization into `*f =
0.0*&#39;. It is therefore best to declare numeric variables with explicit
types.</p>
</div>
</div>
<div id="outline-container-headline-26" class="outline-2">
<h2 id="headline-26">
CONDITIONAL EXPRESSIONS
</h2>
<div id="outline-text-headline-26" class="outline-text-2">
<p>A <em>conditional expression</em> is used with the <strong>[[</strong> compound command to
test attributes of files and to compare strings. Each expression can be
constructed from one or more of the following unary or binary
expressions:</p>
<p>
<strong>-a</strong> <em>file</em> true if <em>file</em> exists.</p>
<dl>
<dt>
<strong>-b</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a block special file.</dd>
<dt>
<strong>-c</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a character special file.</dd>
<dt>
<strong>-d</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a directory.</dd>
<dt>
<strong>-e</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists.</dd>
<dt>
<strong>-f</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a regular file.</dd>
<dt>
<strong>-g</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and has its setgid bit set.</dd>
<dt>
<strong>-h</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a symbolic link.</dd>
<dt>
<strong>-k</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and has its sticky bit set.</dd>
<dt>
<strong>-n</strong> <em>string</em>
</dt>
<dd>true if length of <em>string</em> is non-zero.</dd>
<dt>
<strong>-o</strong> <em>option</em>
</dt>
<dd>true if option named <em>option</em> is on. <em>option</em> may be
a single character, in which case it is a single letter option name.
(See the section `Specifying Options&#39;.)

When no option named <em>option</em> exists, and the <strong>POSIX_BUILTINS</strong> option
hasn&#39;t been set, return 3 with a warning. If that option is set,
return 1 with no warning.</dd>
<dt>
<strong>-p</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a FIFO special file (named
pipe).</dd>
<dt>
<strong>-r</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is readable by current
process.</dd>
<dt>
<strong>-s</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and has size greater than zero.</dd>
<dt>
<strong>-t</strong> <em>fd</em>
</dt>
<dd>true if file descriptor number <em>fd</em> is open and
associated with a terminal device. (note: <em>fd</em> is not optional)</dd>
<dt>
<strong>-u</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and has its setuid bit set.</dd>
<dt>
<strong>-v</strong> <em>varname</em>
</dt>
<dd>true if shell variable <em>varname</em> is set.</dd>
<dt>
<strong>-w</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is writable by current
process.</dd>
<dt>
<strong>-x</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is executable by current
process. If <em>file</em> exists and is a directory, then the current process
has permission to search in the directory.</dd>
<dt>
<strong>-z</strong> <em>string</em>
</dt>
<dd>true if length of <em>string</em> is zero.</dd>
<dt>
<strong>-L</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a symbolic link.</dd>
<dt>
<strong>-O</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is owned by the effective
user ID of this process.</dd>
<dt>
<strong>-G</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and its group matches the
effective group ID of this process.</dd>
<dt>
<strong>-S</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and is a socket.</dd>
<dt>
<strong>-N</strong> <em>file</em>
</dt>
<dd>true if <em>file</em> exists and its access time is not newer
than its modification time.</dd>
<dt>
<em>file1</em> <strong>-nt</strong> <em>file2</em>
</dt>
<dd>true if <em>file1</em> exists and is newer than
<em>file2</em>.</dd>
<dt>
<em>file1</em> <strong>-ot</strong> <em>file2</em>
</dt>
<dd>true if <em>file1</em> exists and is older than
<em>file2</em>.</dd>
<dt>
<em>file1</em> <strong>-ef</strong> <em>file2</em>
</dt>
<dd>true if <em>file1</em> and <em>file2</em> exist and refer
to the same file.</dd>
</dl>
<p><em>string</em> <strong>=</strong> <em>pattern</em></p>
<p>
<em>string</em> <strong>==</strong> <em>pattern</em> true if <em>string</em> matches <em>pattern</em>. The two
forms are exactly equivalent. The `*=*&#39; form is the traditional shell
syntax (and hence the only one generally used with the <strong>test</strong> and <strong>[</strong>
builtins); the `*==*&#39; form provides compatibility with other sorts of
computer language.</p>
<dl>
<dt>
<em>string</em> <strong>!=</strong> <em>pattern</em>
</dt>
<dd>true if <em>string</em> does not match <em>pattern</em>.</dd>
<dt>
<em>string</em> <strong>=~</strong> <em>regexp</em>
</dt>
<dd>true if <em>string</em> matches the regular
expression <em>regexp</em>. If the option <strong>RE_MATCH_PCRE</strong> is set <em>regexp</em> is
tested as a PCRE regular expression using the <strong>zsh/pcre</strong> module, else
it is tested as a POSIX extended regular expression using the
<strong>zsh/regex</strong> module. Upon successful match, some variables will be
updated; no variables are changed if the matching fails.

If the option <strong>BASH_REMATCH</strong> is not set the scalar parameter <strong>MATCH</strong>
is set to the substring that matched the pattern and the integer
parameters <strong>MBEGIN</strong> and <strong>MEND</strong> to the index of the start and end,
respectively, of the match in <em>string</em>, such that if <em>string</em> is
contained in variable <strong>var</strong> the expression `*${var[$MBEGIN,$MEND]}*&#39;
is identical to `*$MATCH*&#39;. The setting of the option <strong>KSH_ARRAYS</strong> is
respected. Likewise, the array <strong>match</strong> is set to the substrings that
matched parenthesised subexpressions and the arrays <strong>mbegin</strong> and
<strong>mend</strong> to the indices of the start and end positions, respectively, of
the substrings within <em>string</em>. The arrays are not set if there were
no parenthesised subexpressions. For example, if the string `*a short
string*&#39; is matched against the regular expression `*s(…)t*&#39;, then
(assuming the option <strong>KSH_ARRAYS</strong> is not set) <strong>MATCH</strong>, <strong>MBEGIN</strong> and
<strong>MEND</strong> are `*short*&#39;, <strong>3</strong> and <strong>7</strong>, respectively, while <strong>match</strong>,
<strong>mbegin</strong> and <strong>mend</strong> are single entry arrays containing the strings
`*hor*&#39;, `*4*&#39; and `*6*&#39;, respectively.

If the option <strong>BASH_REMATCH</strong> is set the array <strong>BASH_REMATCH</strong> is set to
the substring that matched the pattern followed by the substrings that
matched parenthesised subexpressions within the pattern.</dd>
<dt>
<em>string1</em> <strong>&lt;</strong> <em>string2</em>
</dt>
<dd>true if <em>string1</em> comes before <em>string2</em>
based on ASCII value of their characters.</dd>
<dt>
<em>string1</em> <strong>&gt;</strong> <em>string2</em>
</dt>
<dd>true if <em>string1</em> comes after <em>string2</em>
based on ASCII value of their characters.</dd>
<dt>
<em>exp1</em> <strong>-eq</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> is numerically equal to <em>exp2</em>.
Note that for purely numeric comparisons use of the <strong>((*/…/</strong>))*
builtin described in the section `ARITHMETIC EVALUATION&#39; is more
convenient than conditional expressions.</dd>
<dt>
<em>exp1</em> <strong>-ne</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> is numerically not equal to
<em>exp2</em>.</dd>
<dt>
<em>exp1</em> <strong>-lt</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> is numerically less than <em>exp2</em>.</dd>
<dt>
<em>exp1</em> <strong>-gt</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> is numerically greater than
<em>exp2</em>.</dd>
<dt>
<em>exp1</em> <strong>-le</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> is numerically less than or
equal to <em>exp2</em>.</dd>
<dt>
<em>exp1</em> <strong>-ge</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> is numerically greater than or
equal to <em>exp2</em>.</dd>
<dt>
<strong>(</strong> <em>exp</em> <strong>)</strong>
</dt>
<dd>true if <em>exp</em> is true.</dd>
<dt>
<strong>!</strong> <em>exp</em>
</dt>
<dd>true if <em>exp</em> is false.</dd>
<dt>
<em>exp1</em> <strong>&amp;&amp;</strong> <em>exp2</em>
</dt>
<dd>true if <em>exp1</em> and <em>exp2</em> are both true.</dd>
<dt>
<em>exp1</em> <strong>||</strong> <em>exp2</em>
</dt>
<dd>true if either <em>exp1</em> or <em>exp2</em> is true.</dd>
</dl>
<p>For compatibility, if there is a single argument that is not
syntactically significant, typically a variable, the condition is
treated as a test for whether the expression expands as a string of
non-zero length. In other words, <strong><a href=" $var "> $var </a></strong> is the same as <strong>[[ -n</strong>
$var ]]. It is recommended that the second, explicit, form be used where
possible.</p>
<p>
Normal shell expansion is performed on the <em>file</em>, <em>string</em> and
<em>pattern</em> arguments, but the result of each expansion is constrained to
be a single word, similar to the effect of double quotes.</p>
<p>
Filename generation is not performed on any form of argument to
conditions. However, it can be forced in any case where normal shell
expansion is valid and when the option <strong>EXTENDED_GLOB</strong> is in effect by
using an explicit glob qualifier of the form <strong>(#q)</strong> at the end of the
string. A normal glob qualifier expression may appear between the `*q*&#39;
and the closing parenthesis; if none appears the expression has no
effect beyond causing filename generation. The results of filename
generation are joined together to form a single word, as with the
results of other forms of expansion.</p>
<p>
This special use of filename generation is only available with the <strong>[[</strong>
syntax. If the condition occurs within the <strong>[</strong> or <strong>test</strong> builtin
commands then globbing occurs instead as part of normal command line
expansion before the condition is evaluated. In this case it may
generate multiple words which are likely to confuse the syntax of the
test command.</p>
<p>
For example,</p>
<blockquote>
<pre class="example">
[[ -n file*(#qN) ]]
</pre>
</blockquote>
<p>
produces status zero if and only if there is at least one file in the
current directory beginning with the string `*file*&#39;. The globbing
qualifier <strong>N</strong> ensures that the expression is empty if there is no
matching file.</p>
<p>
Pattern metacharacters are active for the <em>pattern</em> arguments; the
patterns are the same as those used for filename generation, see
/zshexpn/(1), but there is no special behaviour of `*/*&#39; nor initial
dots, and no glob qualifiers are allowed.</p>
<p>
In each of the above expressions, if <em>file</em> is of the form
`*/dev/fd/*/n/&#39;, where <em>n</em> is an integer, then the test applied to the
open file whose descriptor number is <em>n</em>, even if the underlying system
does not support the <strong>/dev/fd</strong> directory.</p>
<p>
In the forms which do numeric comparison, the expressions <em>exp</em> undergo
arithmetic expansion as if they were enclosed in <strong>$((*/…/</strong>))*.</p>
<p>
For example, the following:</p>
<blockquote>
<pre class="example">
[[ ( -f foo || -f bar ) &amp;&amp; $report = y* ]] &amp;&amp; print File exists.
</pre>
</blockquote>
<p>
tests if either file <strong>foo</strong> or file <strong>bar</strong> exists, and if so, if the value
of the parameter <strong>report</strong> begins with `*y*&#39;; if the complete condition
is true, the message `*File exists.*&#39; is printed.</p>
</div>
</div>
<div id="outline-container-headline-27" class="outline-2">
<h2 id="headline-27">
EXPANSION OF PROMPT SEQUENCES
</h2>
<div id="outline-text-headline-27" class="outline-text-2">
<p>Prompt sequences undergo a special form of expansion. This type of
expansion is also available using the <strong>-P</strong> option to the <strong>print</strong>
builtin.</p>
<p>
If the <strong>PROMPT_SUBST</strong> option is set, the prompt string is first
subjected to <em>parameter expansion</em>, <em>command substitution</em> and
<em>arithmetic expansion</em>. See /zshexpn/(1).</p>
<p>
Certain escape sequences may be recognised in the prompt string.</p>
<p>
If the <strong>PROMPT_BANG</strong> option is set, a `*!*&#39; in the prompt is replaced by
the current history event number. A literal `*!*&#39; may then be
represented as `*!!*&#39;.</p>
<p>
If the <strong>PROMPT_PERCENT</strong> option is set, certain escape sequences that
start with `*%*&#39; are expanded. Many escapes are followed by a single
character, although some of these take an optional integer argument that
should appear between the `*%*&#39; and the next character of the sequence.
More complicated escape sequences are available to provide conditional
expansion.</p>
</div>
</div>
<div id="outline-container-headline-28" class="outline-2">
<h2 id="headline-28">
SIMPLE PROMPT ESCAPES
</h2>
<div id="outline-text-headline-28" class="outline-text-2">
<div id="outline-container-headline-29" class="outline-3">
<h3 id="headline-29">
Special characters
</h3>
<div id="outline-text-headline-29" class="outline-text-3">
<p><strong>%%</strong> A `*%*&#39;.</p>
<dl>
<dt>
<strong>%)</strong>
</dt>
<dd>A `*)*&#39;.</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-30" class="outline-3">
<h3 id="headline-30">
Login information
</h3>
<div id="outline-text-headline-30" class="outline-text-3">
<p><strong>%l</strong> The line (tty) the user is logged in on, without `*/dev/*&#39; prefix.
If the name starts with `*/dev/tty*&#39;, that prefix is stripped.</p>
<dl>
<dt>
<strong>%M</strong>
</dt>
<dd>The full machine hostname.</dd>
<dt>
<strong>%m</strong>
</dt>
<dd>The hostname up to the first `*.*&#39;. An integer may follow the
`*%*&#39; to specify how many components of the hostname are desired. With
a negative integer, trailing components of the hostname are shown.</dd>
<dt>
<strong>%n</strong>
</dt>
<dd><strong>$USERNAME</strong>.</dd>
<dt>
<strong>%y</strong>
</dt>
<dd>The line (tty) the user is logged in on, without `*/dev/*&#39;
prefix. This does not treat `*/dev/tty*&#39; names specially.</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-31" class="outline-3">
<h3 id="headline-31">
Shell state
</h3>
<div id="outline-text-headline-31" class="outline-text-3">
<p><strong>%#</strong> A `*#*&#39; if the shell is running with privileges, a `*%*&#39; if not.
Equivalent to `*%(!.#.%%)*&#39;. The definition of `privileged&#39;, for these
purposes, is that either the effective user ID is zero, or, if POSIX.1e
capabilities are supported, that at least one capability is raised in
either the Effective or Inheritable capability vectors.</p>
<dl>
<dt>
<strong>%?</strong>
</dt>
<dd>The return status of the last command executed just before the
prompt.</dd>
<dt>
<strong>%_</strong>
</dt>
<dd>The status of the parser, i.e. the shell constructs (like
`*if*&#39; and `*for*&#39;) that have been started on the command line. If
given an integer number that many strings will be printed; zero or
negative or no integer means print as many as there are. This is most
useful in prompts <strong>PS2</strong> for continuation lines and <strong>PS4</strong> for debugging
with the <strong>XTRACE</strong> option; in the latter case it will also work
non-interactively.</dd>
<dt>
<strong>%^</strong>
</dt>
<dd>The status of the parser in reverse. This is the same as
`*%_*&#39; other than the order of strings. It is often used in <strong>RPS2</strong>.</dd>
</dl>
<p><strong>%d</strong></p>
<p>
<strong>%/</strong> Current working directory. If an integer follows the `*%*&#39;, it
specifies a number of trailing components of the current working
directory to show; zero means the whole path. A negative integer
specifies leading components, i.e. <strong>%-1d</strong> specifies the first component.</p>
<dl>
<dt>
<strong>%~</strong>
</dt>
<dd>As <strong>%d</strong> and <strong>%/</strong>, but if the current working directory starts
with <strong>$HOME</strong>, that part is replaced by a `*~*&#39;. Furthermore, if it has
a named directory as its prefix, that part is replaced by a `*~*&#39;
followed by the name of the directory, but only if the result is
shorter than the full path; see <em>Dynamic</em> and <em>Static named
directories</em> in /zshexpn/(1).</dd>
<dt>
<strong>%e</strong>
</dt>
<dd>Evaluation depth of the current sourced file, shell function,
or <strong>eval</strong>. This is incremented or decremented every time the value of
<strong>%N</strong> is set or reverted to a previous value, respectively. This is
most useful for debugging as part of <strong>$PS4</strong>.</dd>
</dl>
<p><strong>%h</strong></p>
<p>
<strong>%!</strong> Current history event number.</p>
<dl>
<dt>
<strong>%i</strong>
</dt>
<dd>The line number currently being executed in the script,
sourced file, or shell function given by <strong>%N</strong>. This is most useful for
debugging as part of <strong>$PS4</strong>.</dd>
<dt>
<strong>%I</strong>
</dt>
<dd>The line number currently being executed in the file <strong>%x</strong>.
This is similar to <strong>%i</strong>, but the line number is always a line number
in the file where the code was defined, even if the code is a shell
function.</dd>
<dt>
<strong>%j</strong>
</dt>
<dd>The number of jobs.</dd>
<dt>
<strong>%L</strong>
</dt>
<dd>The current value of <strong>$SHLVL</strong>.</dd>
<dt>
<strong>%N</strong>
</dt>
<dd>The name of the script, sourced file, or shell function that
zsh is currently executing, whichever was started most recently. If
there is none, this is equivalent to the parameter <strong>$0</strong>. An integer
may follow the `*%*&#39; to specify a number of trailing path components
to show; zero means the full path. A negative integer specifies
leading components.</dd>
<dt>
<strong>%x</strong>
</dt>
<dd>The name of the file containing the source code currently
being executed. This behaves as <strong>%N</strong> except that function and eval
command names are not shown, instead the file where they were defined.</dd>
</dl>
<p><strong>%c</strong></p>
<p>
<strong>%.</strong></p>
<p>
<strong>%C</strong> Trailing component of the current working directory. An integer may
follow the `*%*&#39; to get more than one component. Unless `*%C*&#39; is used,
tilde contraction is performed first. These are deprecated as <strong>%c</strong> and
<strong>%C</strong> are equivalent to <strong>%1~</strong> and <strong>%1/</strong>, respectively, while explicit
positive integers have the same effect as for the latter two sequences.</p>
</div>
</div>
<div id="outline-container-headline-32" class="outline-3">
<h3 id="headline-32">
Date and time
</h3>
<div id="outline-text-headline-32" class="outline-text-3">
<p><strong>%D</strong> The date in <em>yy/*-<strong><em>mm</em></strong>-*/dd</em> format.</p>
<dl>
<dt>
<strong>%T</strong>
</dt>
<dd>Current time of day, in 24-hour format.</dd>
</dl>
<p><strong>%t</strong></p>
<p>
<strong>%@</strong> Current time of day, in 12-hour, am/pm format.</p>
<dl>
<dt>
<strong>%*</strong>
</dt>
<dd>Current time of day in 24-hour format, with seconds.</dd>
<dt>
<strong>%w</strong>
</dt>
<dd>The date in <em>day/*-*/dd</em> format.</dd>
<dt>
<strong>%W</strong>
</dt>
<dd>The date in <em>mm/*/*/dd/*/*/yy</em> format.</dd>
<dt>
<strong>%D{*/string/</strong>}*
</dt>
<dd>
<p><em>string</em> is formatted using the <strong>strftime</strong>
function. See /strftime/(3) for more details. Various zsh extensions
provide numbers with no leading zero or space if the number is a
single digit:</p>
<dl>
<dt>
<strong>%f</strong>
</dt>
<dd>a day of the month</dd>
<dt>
<strong>%K</strong>
</dt>
<dd>the hour of the day on the 24-hour clock</dd>
<dt>
<strong>%L</strong>
</dt>
<dd>the hour of the day on the 12-hour clock</dd>
</dl>
<p>In addition, if the system supports the POSIX <strong>gettimeofday</strong> system
call, <strong>%.</strong> provides decimal fractions of a second since the epoch with
leading zeroes. By default three decimal places are provided, but a
number of digits up to 9 may be given following the <strong>%</strong>; hence <strong>%6.</strong>
outputs microseconds, and <strong>%9.</strong> outputs nanoseconds. (The latter
requires a nanosecond-precision <strong>clock_gettime</strong>; systems lacking this
will return a value multiplied by the appropriate power of 10.) A
typical example of this is the format `*%D{%H:%M:%S.%.}*&#39;.</p>
<p>
The GNU extension <strong>%N</strong> is handled as a synonym for <strong>%9.</strong>.</p>
<p>
Additionally, the GNU extension that a `*-<strong>&#39; between the *%</strong> and the
format character causes a leading zero or space to be stripped is
handled directly by the shell for the format characters <strong>d</strong>, <strong>f</strong>, <strong>H</strong>,
<strong>k</strong>, <strong>l</strong>, <strong>m</strong>, <strong>M</strong>, <strong>S</strong> and <strong>y</strong>; any other format characters are
provided to the system&#39;s strftime(3) with any leading `*-*&#39; present,
so the handling is system dependent. Further GNU (or other) extensions
are also passed to strftime(3) and may work if the system supports
them.</p>
</dd>
</dl>
</div>
</div>
<div id="outline-container-headline-33" class="outline-3">
<h3 id="headline-33">
Visual effects
</h3>
<div id="outline-text-headline-33" class="outline-text-3">
<p><strong>%B</strong> (<strong>%b</strong>) Start (stop) boldface mode.</p>
<dl>
<dt>
<strong>%E</strong>
</dt>
<dd>Clear to end of line.</dd>
<dt>
<strong>%U</strong> (<strong>%u</strong>)
</dt>
<dd>Start (stop) underline mode.</dd>
<dt>
<strong>%S</strong> (<strong>%s</strong>)
</dt>
<dd>Start (stop) standout mode.</dd>
<dt>
<strong>%F</strong> (<strong>%f</strong>)
</dt>
<dd>Start (stop) using a different foreground colour, if
supported by the terminal. The colour may be specified two ways:
either as a numeric argument, as normal, or by a sequence in braces
following the <strong>%F</strong>, for example <strong>%F{red}</strong>. In the latter case the
values allowed are as described for the <strong>fg</strong> <strong>zle_highlight</strong>
attribute; see <em>Character Highlighting</em> in /zshzle/(1). This means
that numeric colours are allowed in the second format also.</dd>
<dt>
<strong>%K</strong> (<strong>%k</strong>)
</dt>
<dd>Start (stop) using a different bacKground colour. The
syntax is identical to that for <strong>%F</strong> and <strong>%f</strong>.</dd>
<dt>
<strong>%{</strong>…*%}*
</dt>
<dd>Include a string as a literal escape sequence. The
string within the braces should not change the cursor position. Brace
pairs can nest.

A positive numeric argument between the <strong>%</strong> and the <strong>{</strong> is treated as
described for <strong>%G</strong> below.</dd>
<dt>
<strong>%G</strong>
</dt>
<dd>Within a <strong>%{</strong>…*%}* sequence, include a `glitch&#39;: that is,
assume that a single character width will be output. This is useful
when outputting characters that otherwise cannot be correctly handled
by the shell, such as the alternate character set on some terminals.
The characters in question can be included within a <strong>%{</strong>…*%}*
sequence together with the appropriate number of <strong>%G</strong> sequences to
indicate the correct width. An integer between the `*%*&#39; and `*G*&#39;
indicates a character width other than one. Hence <strong>%{*/seq/*%2G%}</strong>
outputs <em>seq</em> and assumes it takes up the width of two standard
characters.

Multiple uses of <strong>%G</strong> accumulate in the obvious fashion; the position
of the <strong>%G</strong> is unimportant. Negative integers are not handled.

Note that when prompt truncation is in use it is advisable to divide
up output into single characters within each <strong>%{</strong>…*%}* group so that
the correct truncation point can be found.</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-34" class="outline-2">
<h2 id="headline-34">
CONDITIONAL SUBSTRINGS IN PROMPTS
</h2>
<div id="outline-text-headline-34" class="outline-text-2">
<p><strong>%v</strong> The value of the first element of the <strong>psvar</strong> array parameter.
Following the `*%*&#39; with an integer gives that element of the array.
Negative integers count from the end of the array.</p>
<dl>
<dt>
<strong>%(*/x/</strong>.*/true-text/*.*/false-text/*)*
</dt>
<dd>
<p>Specifies a ternary
expression. The character following the <em>x</em> is arbitrary; the same
character is used to separate the text for the `true&#39; result from that
for the `false&#39; result. This separator may not appear in the
<em>true-text</em>, except as part of a %-escape sequence. A `*)*&#39; may appear
in the <em>false-text</em> as `*%)*&#39;. <em>true-text</em> and <em>false-text</em> may both
contain arbitrarily-nested escape sequences, including further ternary
expressions.</p>
<p>
The left parenthesis may be preceded or followed by a positive integer
<em>n</em>, which defaults to zero. A negative integer will be multiplied by
-1, except as noted below for `*l*&#39;. The test character <em>x</em> may be any
of the following:</p>
<dl>
<dt>
<strong>!</strong>
</dt>
<dd>True if the shell is running with privileges.</dd>
<dt>
<strong>#</strong>
</dt>
<dd>True if the effective uid of the current process is <em>n</em>.</dd>
<dt>
<strong>?</strong>
</dt>
<dd>True if the exit status of the last command was <em>n</em>.</dd>
<dt>
<strong>_</strong>
</dt>
<dd>True if at least <em>n</em> shell constructs were started.</dd>
<dt>
<strong>C</strong>
</dt>
<dd>
<dl>
<dt>
<strong>/</strong>
</dt>
<dd>
<p>True if the current absolute path has at least <em>n</em>
elements relative to the root directory, hence <strong>/</strong> is counted as 0
elements.</p>
<dl>
<dt>
<strong>c</strong>
</dt>
<dd>
<dl>
<dt>
<strong>.</strong>
</dt>
<dd>
<dl>
<dt>
<strong>~</strong>
</dt>
<dd>
<p>True if the current path, with prefix
replacement, has at least <em>n</em> elements relative to the root
directory, hence <strong>/</strong> is counted as 0 elements.</p>
<dl>
<dt>
<strong>D</strong>
</dt>
<dd>True if the month is equal to <em>n</em> (January = 0).</dd>
<dt>
<strong>d</strong>
</dt>
<dd>True if the day of the month is equal to <em>n</em>.</dd>
<dt>
<strong>e</strong>
</dt>
<dd>True if the evaluation depth is at least <em>n</em>.</dd>
<dt>
<strong>g</strong>
</dt>
<dd>True if the effective gid of the current process is
<em>n</em>.</dd>
<dt>
<strong>j</strong>
</dt>
<dd>True if the number of jobs is at least <em>n</em>.</dd>
<dt>
<strong>L</strong>
</dt>
<dd>True if the <strong>SHLVL</strong> parameter is at least <em>n</em>.</dd>
<dt>
<strong>l</strong>
</dt>
<dd>True if at least <em>n</em> characters have already been
printed on the current line. When <em>n</em> is negative, true if at
least <strong>abs(*/n/</strong>)* characters remain before the opposite
margin (thus the left margin for <strong>RPROMPT</strong>).</dd>
<dt>
<strong>S</strong>
</dt>
<dd>True if the <strong>SECONDS</strong> parameter is at least <em>n</em>.</dd>
<dt>
<strong>T</strong>
</dt>
<dd>True if the time in hours is equal to <em>n</em>.</dd>
<dt>
<strong>t</strong>
</dt>
<dd>True if the time in minutes is equal to <em>n</em>.</dd>
<dt>
<strong>v</strong>
</dt>
<dd>True if the array <strong>psvar</strong> has at least <em>n</em> elements.</dd>
<dt>
<strong>V</strong>
</dt>
<dd>True if element <em>n</em> of the array <strong>psvar</strong> is set and
non-empty.</dd>
<dt>
<strong>w</strong>
</dt>
<dd>True if the day of the week is equal to <em>n</em> (Sunday =
0).</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><strong>%&lt;*/string/*&lt;</strong></p>
<p>
<strong>%&gt;*/string/*&gt;</strong></p>
<p>
<strong>%[*/xstring/*]</strong> Specifies truncation behaviour for the remainder of the
prompt string. The third, deprecated, form is equivalent to
`*%*/xstringx/&#39;, i.e. <em>x</em> may be `*&lt;*&#39; or `*&gt;*&#39;. The <em>string</em> will be
displayed in place of the truncated portion of any string; note this
does not undergo prompt expansion.</p>
<blockquote>
<p>The numeric argument, which in the third form may appear immediately
after the `*[*&#39;, specifies the maximum permitted length of the various
strings that can be displayed in the prompt. In the first two forms,
this numeric argument may be negative, in which case the truncation
length is determined by subtracting the absolute value of the numeric
argument from the number of character positions remaining on the current
prompt line. If this results in a zero or negative length, a length of 1
is used. In other words, a negative argument arranges that after
truncation at least <em>n</em> characters remain before the right margin (left
margin for <strong>RPROMPT</strong>).</p>
<p>
The forms with `*&lt;*&#39; truncate at the left of the string, and the forms
with `*&gt;*&#39; truncate at the right of the string. For example, if the
current directory is `*/home/pike*&#39;, the prompt `*%8&lt;..&lt;%/*&#39; will expand
to `*..e/pike*&#39;. In this string, the terminating character (`*&lt;*&#39;, `*&gt;*&#39;
or `*]*&#39;), or in fact any character, may be quoted by a preceding `*\*&#39;;
note when using <strong>print -P</strong>, however, that this must be doubled as the
string is also subject to standard <strong>print</strong> processing, in addition to
any backslashes removed by a double quoted string: the worst case is
therefore `*print -P &#34;%&lt;\\\\&lt;&lt;…&#34;*&#39;.</p>
<p>
If the <em>string</em> is longer than the specified truncation length, it will
appear in full, completely replacing the truncated string.</p>
<p>
The part of the prompt string to be truncated runs to the end of the
string, or to the end of the next enclosing group of the `*%(*&#39;
construct, or to the next truncation encountered at the same grouping
level (i.e. truncations inside a `*%(<strong>&#39; are separate), which ever comes
first. In particular, a truncation with argument zero (e.g., `*%&lt;&lt;</strong>&#39;)
marks the end of the range of the string to be truncated while turning
off truncation from there on. For example, the prompt `*%10&lt;…&lt;%~%&lt;&lt;%#
<strong>&#39; will print a truncated representation of the current directory,
followed by a `*%</strong>&#39; or `*#*&#39;, followed by a space. Without the `*%&lt;&lt;*&#39;,
those two characters would be included in the string to be truncated.
Note that `*%-0&lt;&lt;*&#39; is not equivalent to `*%&lt;&lt;*&#39; but specifies that the
prompt is truncated at the right margin.</p>
<p>
Truncation applies only within each individual line of the prompt, as
delimited by embedded newlines (if any). If the total length of any line
of the prompt after truncation is greater than the terminal width, or if
the part to be truncated contains embedded newlines, truncation behavior
is undefined and may change in a future version of the shell. Use
`*%-<strong><em>n/*(l.*/true-text</em></strong>.*/false-text/*)*&#39; to remove parts of the
prompt when the available space is less than <em>n</em>.</p>
</blockquote>
</div>
</div>


        </main>
        <footer class="container footer">
            <p>Copyright 2024. All rights reserved.</p>

        </footer>

        
        

        
            <script src="/js/main.95916b5b8c09add4922ea47e674b5da7fc4b6347a3e8c4e25e98b4b7d236080b.js" integrity="sha256-lZFrW4wJrdSSLqR&#43;Z0tdp/xLY0ej6MTiXpi0t9I2CAs=" crossorigin="anonymous"></script>
    </body>
</html>
